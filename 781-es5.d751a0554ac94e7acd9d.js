!function(){function t(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function r(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}(self.webpackChunkrestaurant_manager=self.webpackChunkrestaurant_manager||[]).push([[781],{9781:function(r,n,a){"use strict";a.r(n),a.d(n,{RestaurantModul:function(){return ut}});var i=a(8583),s=a(3679),u=a(1095),o=a(3738),c=a(7539),l=a(2458),d=a(2238),p=a(6627),f=a(9983),m=a(2613),h=a(7441),Z=a(4436),g=a(6458),v=a(5987),y=a(1601),q=a(3065),A=a(2579),b=a(7574),k=a(5319),T=a(721),U=a(3929),_=a(6667),w=a(7716),N=a(8295);function F(t,r){1&t&&(w.TgZ(0,"span"),w._uU(1,"Edit restaurant"),w.qZA())}function I(t,r){1&t&&(w.TgZ(0,"span"),w._uU(1,"New restaurant"),w.qZA())}function Y(t,r){1&t&&(w.TgZ(0,"mat-error"),w._uU(1," Name is "),w.TgZ(2,"strong"),w._uU(3,"required"),w.qZA(),w.qZA())}function D(t,r){if(1&t&&(w.TgZ(0,"mat-option",15),w._uU(1),w.qZA()),2&t){var e=r.$implicit;w.Q6J("value",e.id.toLowerCase()),w.xp6(1),w.hij(" ",e.name," ")}}function J(t,r){1&t&&(w.TgZ(0,"mat-error"),w._uU(1," Country is "),w.TgZ(2,"strong"),w._uU(3,"required"),w.qZA(),w.qZA())}function x(t,r){1&t&&(w.TgZ(0,"mat-error"),w._uU(1," City is "),w.TgZ(2,"strong"),w._uU(3,"required"),w.qZA(),w.qZA())}function R(t,r){1&t&&(w.TgZ(0,"mat-error"),w._uU(1," Street is "),w.TgZ(2,"strong"),w._uU(3,"required"),w.qZA(),w.qZA())}function O(t,r){1&t&&(w.TgZ(0,"mat-error"),w._uU(1," Zip code is "),w.TgZ(2,"strong"),w._uU(3,"required"),w.qZA(),w.qZA())}var C=function(){var r=function(){function r(e,n,a,i){t(this,r),this.formBuilder=e,this.location=n,this.route=a,this.store=i,this.isEdit=!1,this.subscriptions=new k.w,this.countries=[]}return e(r,[{key:"ngOnDestroy",value:function(){this.subscriptions.unsubscribe()}},{key:"ngOnInit",value:function(){var t=this;this.subscriptions.add(this.store.select(T.ox).subscribe(function(r){t.countries=r})),this.restaurantForm=this.formBuilder.group({name:new s.NI("",[s.kI.required]),country:new s.NI("",[s.kI.required]),city:new s.NI("",[s.kI.required]),street:new s.NI("",[s.kI.required]),zipcode:new s.NI("",[s.kI.required])}),this.subscriptions.add(this.store.select((0,_.nO)(this.route.snapshot.params.id)).subscribe(function(r){var e,n;t.restaurant=r,t.isEdit=void 0!==(null===(e=t.restaurant)||void 0===e?void 0:e.id)&&""!==(null===(n=t.restaurant)||void 0===n?void 0:n.id),t.restaurant&&(t.restaurantForm.controls.name.setValue(t.restaurant.name),t.restaurantForm.controls.country.setValue(t.restaurant.countryId),t.restaurantForm.controls.city.setValue(t.restaurant.city),t.restaurantForm.controls.street.setValue(t.restaurant.street),t.restaurantForm.controls.zipcode.setValue(t.restaurant.zipCode))}))}},{key:"navigateBack",value:function(){this.location.back()}},{key:"onSubmit",value:function(){var t;if(!this.restaurantForm.invalid){var r={id:null===(t=this.restaurant)||void 0===t?void 0:t.id,name:this.restaurantForm.controls.name.value,countryId:this.restaurantForm.controls.country.value,city:this.restaurantForm.controls.city.value,street:this.restaurantForm.controls.street.value,zipCode:this.restaurantForm.controls.zipcode.value};this.store.dispatch(this.isEdit?(0,U.i1)({restaurant:r}):(0,U.mu)({restaurant:r}))}}}]),r}();return r.\u0275fac=function(t){return new(t||r)(w.Y36(s.qu),w.Y36(i.Ye),w.Y36(v.gz),w.Y36(q.yh))},r.\u0275cmp=w.Xpm({type:r,selectors:[["app-edit-restaurant"]],decls:38,vars:9,consts:[[1,"edit-form-container"],[1,"header"],[4,"ngIf"],[3,"formGroup"],[1,"input-full-width"],["matInput","","placeholder","Name","formControlName","name"],["placeholder","Select country","formControlName","country"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","City","formControlName","city"],["matInput","","placeholder","Street","formControlName","street"],["matInput","","placeholder","Zip code","formControlName","zipcode"],[1,"actions"],["mat-button","",1,"back-button",3,"click"],["mat-button","",1,"primary-button",3,"click"],[3,"value"]],template:function(t,r){1&t&&(w.TgZ(0,"div",0),w.TgZ(1,"div",1),w.YNc(2,F,2,0,"span",2),w.YNc(3,I,2,0,"span",2),w.qZA(),w.TgZ(4,"form",3),w.TgZ(5,"mat-form-field",4),w.TgZ(6,"mat-label"),w._uU(7,"Name"),w.qZA(),w._UZ(8,"input",5),w.YNc(9,Y,4,0,"mat-error",2),w.qZA(),w.TgZ(10,"mat-form-field",4),w.TgZ(11,"mat-select",6),w.TgZ(12,"mat-option",7),w._uU(13,"Choose country"),w.qZA(),w.YNc(14,D,2,2,"mat-option",8),w.qZA(),w.YNc(15,J,4,0,"mat-error",2),w.qZA(),w.TgZ(16,"mat-form-field",4),w.TgZ(17,"mat-label"),w._uU(18,"City"),w.qZA(),w._UZ(19,"input",9),w.YNc(20,x,4,0,"mat-error",2),w.qZA(),w.TgZ(21,"mat-form-field",4),w.TgZ(22,"mat-label"),w._uU(23,"Street"),w.qZA(),w._UZ(24,"input",10),w.YNc(25,R,4,0,"mat-error",2),w.qZA(),w.TgZ(26,"mat-form-field",4),w.TgZ(27,"mat-label"),w._uU(28,"Zip code"),w.qZA(),w._UZ(29,"input",11),w.YNc(30,O,4,0,"mat-error",2),w.qZA(),w.TgZ(31,"div",12),w.TgZ(32,"button",13),w.NdJ("click",function(){return r.navigateBack()}),w.TgZ(33,"mat-icon"),w._uU(34,"arrow_back"),w.qZA(),w._uU(35," Back "),w.qZA(),w.TgZ(36,"button",14),w.NdJ("click",function(){return r.onSubmit()}),w._uU(37," Save "),w.qZA(),w.qZA(),w.qZA(),w.qZA()),2&t&&(w.xp6(2),w.Q6J("ngIf",r.isEdit),w.xp6(1),w.Q6J("ngIf",!r.isEdit),w.xp6(1),w.Q6J("formGroup",r.restaurantForm),w.xp6(5),w.Q6J("ngIf",r.restaurantForm.controls.name.hasError("required")),w.xp6(5),w.Q6J("ngForOf",r.countries),w.xp6(1),w.Q6J("ngIf",r.restaurantForm.controls.country.hasError("required")),w.xp6(5),w.Q6J("ngIf",r.restaurantForm.controls.city.hasError("required")),w.xp6(5),w.Q6J("ngIf",r.restaurantForm.controls.street.hasError("required")),w.xp6(5),w.Q6J("ngIf",r.restaurantForm.controls.zipcode.hasError("required")))},directives:[i.O5,s._Y,s.JL,s.sg,N.KE,N.hX,f.Nt,s.Fj,s.JJ,s.u,h.gD,l.ey,i.sg,u.lW,p.Hw,N.TO],styles:[""]}),r}(),E=a(5917),Q=a(3190),z=a(8002),G=a(5304),S=a(2340),L=a(2232),B=a(1841),W=function(){var r=function r(e,n){var a=this;t(this,r),this.action$=e,this.http=n,this.baseUrl="",this.loadRestaurants$=(0,y.GW)(function(){return a.action$.pipe((0,y.l4)(U.ny),(0,Q.w)(function(t){return a.http.get(a.baseUrl).pipe((0,z.U)(function(t){return(0,U.F3)({items:t.data})}),(0,G.K)(function(t){return(0,E.of)((0,L.Ey)({error:t.error.Message,msg:"Load restaurants failed",action:"loadRestaurants"}))}))}))}),this.updateRestaurant$=(0,y.GW)(function(){return a.action$.pipe((0,y.l4)(U.i1),(0,Q.w)(function(t){return a.http.patch(a.baseUrl,t.restaurant).pipe((0,z.U)(function(t){return(0,U.UA)({restaurant:t.data})}),(0,G.K)(function(t){return(0,E.of)((0,L.Ey)({error:t.error.Message,msg:"Restaurant update failed",action:"updateRestaurant"}))}))}))}),this.createRestaurant$=(0,y.GW)(function(){return a.action$.pipe((0,y.l4)(U.mu),(0,Q.w)(function(t){return a.http.post(a.baseUrl,t.restaurant).pipe((0,z.U)(function(t){return(0,U.Y0)({restaurant:t.data})}),(0,G.K)(function(t){return(0,E.of)((0,L.Ey)({error:t.error.Message,msg:"Restaurant create failed",action:"createRestaurant"}))}))}))}),this.baseUrl="".concat(S.N.apiUrl,"/api/Restaurant/")};return r.\u0275fac=function(t){return new(t||r)(w.LFG(y.eX),w.LFG(B.eN))},r.\u0275prov=w.Yz7({token:r,factory:r.\u0275fac}),r}(),$=a(8230),j=function(){var r=function(){function r(e){t(this,r),this.store=e}return e(r,[{key:"resolve",value:function(t,r){return this.refresh(r.url)&&(this.previousUrl=r.url,this.reloadData(t)),this.previousUrl=r.url,(0,E.of)(!0)}},{key:"refresh",value:function(t){return!this.previousUrl||this.previousUrl===t}},{key:"reloadData",value:function(t){this.store.dispatch((0,U.ny)())}}]),r}();return r.\u0275fac=function(t){return new(t||r)(w.LFG(q.yh))},r.\u0275prov=w.Yz7({token:r,factory:r.\u0275fac}),r}(),X=a(3997),K=a(5136),V=function(){var r=function(){function r(e,n,a,i,s,u){t(this,r),this.router=e,this.location=n,this.route=a,this.dialog=i,this.store=s,this.baseService=u,this.subscriptions=new k.w}return e(r,[{key:"ngOnDestroy",value:function(){this.subscriptions.unsubscribe()}},{key:"ngOnInit",value:function(){var t=this;this.subscriptions.add(this.store.select((0,_.ar)(this.route.snapshot.params.id)).subscribe(function(r){t.restaurantDetail=r}))}},{key:"navigateBack",value:function(){this.location.back()}},{key:"deleteRestaurant",value:function(){var t=this;this.dialog.open(X.S,{width:"300px",data:{message:"Delete restaurant"},autoFocus:!1}).afterClosed().subscribe(function(r){void 0!==r&&!0===r&&t.store.dispatch((0,U.T)({id:t.restaurantDetail.id,successCallback:t.baseService.navigateBackWithTimeout}))})}},{key:"editRestaurant",value:function(){this.router.navigate(["restaurants/edit",this.restaurantDetail.id])}}]),r}();return r.\u0275fac=function(t){return new(t||r)(w.Y36(v.F0),w.Y36(i.Ye),w.Y36(v.gz),w.Y36(d.uw),w.Y36(q.yh),w.Y36(K.b))},r.\u0275cmp=w.Xpm({type:r,selectors:[["app-restaurant-detail"]],decls:22,vars:5,consts:[[1,"detail-header"],[1,"detail-image"],["matRipple","",3,"click"],["src","./assets/images/image_not_found2.jpg"],[1,"detail-description"],[1,"name"],[1,"description"],[1,"actions"],["mat-button","",1,"danger-button",3,"click"],["mat-button","",1,"primary-button",3,"click"]],template:function(t,r){1&t&&(w._UZ(0,"div",0),w.TgZ(1,"div",1),w.TgZ(2,"mat-icon",2),w.NdJ("click",function(){return r.navigateBack()}),w._uU(3,"keyboard_backspace"),w.qZA(),w._UZ(4,"img",3),w.qZA(),w.TgZ(5,"div",4),w.TgZ(6,"div",5),w.TgZ(7,"span"),w._uU(8),w.qZA(),w.qZA(),w.TgZ(9,"div",6),w._uU(10),w.qZA(),w.TgZ(11,"div",6),w._uU(12),w.qZA(),w.TgZ(13,"div",6),w._uU(14),w.qZA(),w.TgZ(15,"div",6),w._uU(16),w.qZA(),w.TgZ(17,"div",7),w.TgZ(18,"button",8),w.NdJ("click",function(){return r.deleteRestaurant()}),w._uU(19," Delete restaurant "),w.qZA(),w.TgZ(20,"button",9),w.NdJ("click",function(){return r.editRestaurant()}),w._uU(21," Edit restaurant "),w.qZA(),w.qZA(),w.qZA()),2&t&&(w.xp6(8),w.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.name),w.xp6(2),w.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.countryName),w.xp6(2),w.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.city),w.xp6(2),w.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.street),w.xp6(2),w.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.zipCode))},directives:[p.Hw,l.wG,u.lW],styles:[".body-content{margin:0!important}.actions{display:flex;justify-content:space-around}"],encapsulation:2}),r}(),M=a(391),H=function(){var r=function(){function r(e,n){t(this,r),this.router=e,this.store=n}return e(r,[{key:"ngOnInit",value:function(){}},{key:"openDetail",value:function(t){this.store.dispatch((0,U.Lc)({id:t})),this.router.navigate(["restaurants/detail",t])}}]),r}();return r.\u0275fac=function(t){return new(t||r)(w.Y36(v.F0),w.Y36(q.yh))},r.\u0275cmp=w.Xpm({type:r,selectors:[["app-restaurant-item"]],inputs:{restaurant:"restaurant"},decls:11,vars:4,consts:[["matRipple","",1,"list-item-content",3,"click"],[1,"list-item-header"],[1,"list-item-name"],[1,"offer-item-price"]],template:function(t,r){1&t&&(w.TgZ(0,"div",0),w.NdJ("click",function(){return r.openDetail(r.restaurant.id)}),w.TgZ(1,"div",1),w.TgZ(2,"div"),w.TgZ(3,"div"),w.TgZ(4,"h3",2),w._uU(5),w.qZA(),w.qZA(),w.TgZ(6,"div",3),w.TgZ(7,"span"),w._uU(8),w.ALo(9,"addressWithCountry"),w.qZA(),w._uU(10," \xa0 "),w.qZA(),w.qZA(),w.qZA(),w.qZA()),2&t&&(w.xp6(5),w.hij(" ",r.restaurant.name," "),w.xp6(3),w.Oqu(w.lcZ(9,2,r.restaurant)))},directives:[l.wG],pipes:[M.O],styles:[""]}),r}(),P=function(){var r=function(){function r(){t(this,r)}return e(r,[{key:"transform",value:function(t,r){return null!=t&&t.sort(r.nameAsc?function(t,r){return t.name<r.name?1:t.name>r.name?-1:0}:function(t,r){return t.name>r.name?1:t.name<r.name?-1:0}),t}}]),r}();return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=w.Yjl({name:"restaurantSort",type:r,pure:!0}),r}();function tt(t,r){1&t&&(w.TgZ(0,"mat-icon"),w._uU(1,"arrow_drop_down"),w.qZA())}function rt(t,r){1&t&&(w.TgZ(0,"mat-icon"),w._uU(1,"arrow_drop_up"),w.qZA())}function et(t,r){1&t&&w._UZ(0,"app-restaurant-item",6),2&t&&w.Q6J("restaurant",r.$implicit)}var nt,at,it=function(t){return{nameAsc:t}},st=[{path:"",component:(nt=function(){function r(e,n){t(this,r),this.router=e,this.store=n,this.subscriptions=new k.w,this.sortAscDesc=!0}return e(r,[{key:"ngOnDestroy",value:function(){this.subscriptions.unsubscribe()}},{key:"ngOnInit",value:function(){var t=this;this.store.dispatch((0,U.ny)()),this.store.dispatch((0,U.Lc)({id:null})),this.subscriptions.add(this.store.select(_.hN).subscribe(function(r){t.restaurants=r}))}},{key:"addNewRestaurant",value:function(){this.router.navigate(["restaurants/add"])}},{key:"sortRestaurants",value:function(){this.sortAscDesc=!this.sortAscDesc}}]),r}(),nt.\u0275fac=function(t){return new(t||nt)(w.Y36(v.F0),w.Y36(q.yh))},nt.\u0275cmp=w.Xpm({type:nt,selectors:[["app-restaurant"]],decls:14,vars:8,consts:[[1,"restaurant-content"],[1,"header-container"],["matRipple","",1,"sort-item",3,"click"],[4,"ngIf"],["mat-button","",1,"base-button",3,"click"],[3,"restaurant",4,"ngFor","ngForOf"],[3,"restaurant"]],template:function(t,r){1&t&&(w.TgZ(0,"div",0),w.TgZ(1,"div",1),w.TgZ(2,"div",2),w.NdJ("click",function(){return r.sortRestaurants()}),w.TgZ(3,"span"),w._uU(4,"Name"),w.qZA(),w._uU(5," \xa0 "),w.YNc(6,tt,2,0,"mat-icon",3),w.YNc(7,rt,2,0,"mat-icon",3),w.qZA(),w.TgZ(8,"button",4),w.NdJ("click",function(){return r.addNewRestaurant()}),w._uU(9," New \xa0"),w.TgZ(10,"mat-icon"),w._uU(11,"add"),w.qZA(),w.qZA(),w.qZA(),w.YNc(12,et,1,1,"app-restaurant-item",5),w.ALo(13,"restaurantSort"),w.qZA()),2&t&&(w.xp6(6),w.Q6J("ngIf",r.sortAscDesc),w.xp6(1),w.Q6J("ngIf",!r.sortAscDesc),w.xp6(5),w.Q6J("ngForOf",w.xi3(13,3,r.restaurants,w.VKq(6,it,r.sortAscDesc))))},directives:[l.wG,i.O5,u.lW,p.Hw,i.sg,H],pipes:[P],styles:[""]}),nt)},{path:"add",component:C,canActivate:[b.a],resolve:{result:j},runGuardsAndResolvers:"always"},{path:"edit/:id",component:C,canActivate:[b.a],resolve:{result:j},runGuardsAndResolvers:"always"},{path:"detail/:id",component:V,canActivate:[b.a],resolve:{result:j},runGuardsAndResolvers:"always"}],ut=((at=function r(){t(this,r)}).\u0275fac=function(t){return new(t||at)},at.\u0275mod=w.oAB({type:at}),at.\u0275inj=w.cJS({providers:[j],imports:[[A.a,q.Aw.forFeature($.k,$.J),y.sQ.forFeature([W]),v.Bz.forChild(st),i.ez,s.u5,h.LD,m.Fk,s.UX,c.p9,d.Is,Z.KP,p.Ps,u.ot,o.QW,f.c,l.si,g.ZX]]}),at)}}])}();