!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var o,i,r=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(o=n.next()).done)&&(r.push(o.value),!e||r.length!==e);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return r}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,n)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=i(t);if(e){var a=i(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkrestaurant_manager=self.webpackChunkrestaurant_manager||[]).push([[655],{6655:function(o,i,a){"use strict";a.r(i),a.d(i,{OfferModul:function(){return Wt}});var c=a(8583),l=a(3679),f=a(9490),d=a(7860),g=a(7716),m=a(2458),p=a(9238),h=["button"],v=["*"],b=new g.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),y=new g.OlP("MatButtonToggleGroup"),_={provide:l.JU,useExisting:(0,g.Gpc)(function(){return Z}),multi:!0},T=0,k=function t(e,n){u(this,t),this.source=e,this.value=n},Z=function(){var t=function(){function t(e,n){u(this,t),this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=function(){},this._onTouched=function(){},this._name="mat-button-toggle-group-"+T++,this.valueChange=new g.vpe,this.change=new g.vpe,this.appearance=n&&n.appearance?n.appearance:"standard"}return s(t,[{key:"name",get:function(){return this._name},set:function(t){var e=this;this._name=t,this._buttonToggles&&this._buttonToggles.forEach(function(t){t.name=e._name,t._markForCheck()})}},{key:"vertical",get:function(){return this._vertical},set:function(t){this._vertical=(0,f.Ig)(t)}},{key:"value",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(function(t){return t.value}):t[0]?t[0].value:void 0},set:function(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}},{key:"selected",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=(0,f.Ig)(t)}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=(0,f.Ig)(t),this._buttonToggles&&this._buttonToggles.forEach(function(t){return t._markForCheck()})}},{key:"ngOnInit",value:function(){this._selectionModel=new d.Ov(this.multiple,void 0,!1)}},{key:"ngAfterContentInit",value:function(){var t;(t=this._selectionModel).select.apply(t,r(this._buttonToggles.filter(function(t){return t.checked})))}},{key:"writeValue",value:function(t){this.value=t,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(t){this._controlValueAccessorChangeFn=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t}},{key:"_emitChangeEvent",value:function(){var t=this.selected,e=Array.isArray(t)?t[t.length-1]:t,n=new k(e,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}},{key:"_syncButtonToggle",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.multiple||!this.selected||t.checked||(this.selected.checked=!1),this._selectionModel?e?this._selectionModel.select(t):this._selectionModel.deselect(t):i=!0,i?Promise.resolve().then(function(){return n._updateModelValue(o)}):this._updateModelValue(o)}},{key:"_isSelected",value:function(t){return this._selectionModel&&this._selectionModel.isSelected(t)}},{key:"_isPrechecked",value:function(t){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(function(e){return null!=t.value&&e===t.value}):t.value===this._rawValue)}},{key:"_setSelectionByValue",value:function(t){var e=this;this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(function(t){return e._selectValue(t)})):(this._clearSelection(),this._selectValue(t)))}},{key:"_clearSelection",value:function(){this._selectionModel.clear(),this._buttonToggles.forEach(function(t){return t.checked=!1})}},{key:"_selectValue",value:function(t){var e=this._buttonToggles.find(function(e){return null!=e.value&&e.value===t});e&&(e.checked=!0,this._selectionModel.select(e))}},{key:"_updateModelValue",value:function(t){t&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(g.sBO),g.Y36(b,8))},t.\u0275dir=g.lG2({type:t,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,e,n){var o;(1&t&&g.Suo(n,C,5),2&t)&&(g.iGM(o=g.CRH())&&(e._buttonToggles=o))},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,e){2&t&&(g.uIk("aria-disabled",e.disabled),g.ekj("mat-button-toggle-vertical",e.vertical)("mat-button-toggle-group-appearance-standard","standard"===e.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[g._Bn([_,{provide:y,useExisting:t}])]}),t}(),I=(0,m.Kr)(function(){return function t(){u(this,t)}}()),C=function(){var t=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(i,t);var o=n(i);function i(t,e,n,r,a,c){var l;u(this,i),(l=o.call(this))._changeDetectorRef=e,l._elementRef=n,l._focusMonitor=r,l._isSingleSelector=!1,l._checked=!1,l.ariaLabelledby=null,l._disabled=!1,l.change=new g.vpe;var s=Number(a);return l.tabIndex=s||0===s?s:null,l.buttonToggleGroup=t,l.appearance=c&&c.appearance?c.appearance:"standard",l}return s(i,[{key:"buttonId",get:function(){return"".concat(this.id,"-button")}},{key:"appearance",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance},set:function(t){this._appearance=t}},{key:"checked",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked},set:function(t){var e=(0,f.Ig)(t);e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled},set:function(t){this._disabled=(0,f.Ig)(t)}},{key:"ngOnInit",value:function(){var t=this.buttonToggleGroup;this._isSingleSelector=t&&!t.multiple,this.id=this.id||"mat-button-toggle-"+T++,this._isSingleSelector&&(this.name=t.name),t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}},{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){var t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}},{key:"focus",value:function(t){this._buttonElement.nativeElement.focus(t)}},{key:"_onButtonClick",value:function(){var t=!!this._isSingleSelector||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new k(this,this.value))}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}}]),i}(I);return t.\u0275fac=function(e){return new(e||t)(g.Y36(y,8),g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(p.tE),g.$8M("tabindex"),g.Y36(b,8))},t.\u0275cmp=g.Xpm({type:t,selectors:[["mat-button-toggle"]],viewQuery:function(t,e){var n;(1&t&&g.Gf(h,5),2&t)&&(g.iGM(n=g.CRH())&&(e._buttonElement=n.first))},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,e){1&t&&g.NdJ("focus",function(){return e.focus()}),2&t&&(g.uIk("aria-label",null)("aria-labelledby",null)("id",e.id)("name",null),g.ekj("mat-button-toggle-standalone",!e.buttonToggleGroup)("mat-button-toggle-checked",e.checked)("mat-button-toggle-disabled",e.disabled)("mat-button-toggle-appearance-standard","standard"===e.appearance))},inputs:{disableRipple:"disableRipple",ariaLabelledby:["aria-labelledby","ariaLabelledby"],tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled",id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],value:"value"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[g.qOj],ngContentSelectors:v,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,e){if(1&t&&(g.F$t(),g.TgZ(0,"button",0,1),g.NdJ("click",function(){return e._onButtonClick()}),g.TgZ(2,"span",2),g.Hsn(3),g.qZA(),g.qZA(),g._UZ(4,"span",3),g._UZ(5,"span",4)),2&t){var n=g.MAs(1);g.Q6J("id",e.buttonId)("disabled",e.disabled||null),g.uIk("tabindex",e.disabled?-1:e.tabIndex)("aria-pressed",e.checked)("name",e.name||null)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby),g.xp6(5),g.Q6J("matRippleTrigger",n)("matRippleDisabled",e.disableRipple||e.disabled)}},directives:[m.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),t}(),O=function(){var t=function t(){u(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[m.BQ,m.si],m.BQ]}),t}(),x=a(2238),A=a(6627),w=a(7441),M=a(5987),P=a(1601),q=a(3065),F=a(9790),E=a(2579),S=a(7574),U=a(2901),J=a(5319),N=a(721),V=(0,q.PH)("[OFFERITEM] Add loadled items",(0,q.Ky)()),B=(0,q.PH)("[OFFERITEM] Add loadled item",(0,q.Ky)()),Y=(0,q.PH)("[OFFERITEM] Add loadled item success",(0,q.Ky)()),G=(0,q.PH)("[OFFERITEM] Edit new item",(0,q.Ky)()),Q=(0,q.PH)("[OFFERITEM] Edit new item success",(0,q.Ky)()),R=(0,q.PH)("[OFFERITEM] Clear"),L=(0,q.PH)("[OFFERITEM] load items for logged restaurant"),j=(0,q.PH)("[OFFERITEM] Delete offer item",(0,q.Ky)()),D=(0,q.PH)("[OFFERITEM] Delete offer item success",(0,q.Ky)()),H=(0,q.PH)("[OFFERITEM] Toggle favorite",(0,q.Ky)()),K=a(5917),$=a(8002),z=a(5304),X=a(2340),W=a(1841),tt=a(4080),et=function(){var t=function(){function t(e,n,o){u(this,t),this.store=e,this.http=n,this.logger=o}return s(t,[{key:"getOfferItemDetail",value:function(t){var e=this;return this.http.get("".concat(X.N.apiUrl,"/api/offerItem/").concat(t)).pipe((0,$.U)(function(t){return t.data}),(0,z.K)(function(t){return e.logger.logError(t,"getOfferItemDetail"),(0,K.of)(null)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.LFG(q.yh),g.LFG(W.eN),g.LFG(tt.i))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),nt=a(446),ot=a(8295);function it(t,e){1&t&&(g.TgZ(0,"mat-error"),g._uU(1," Name is "),g.TgZ(2,"strong"),g._uU(3,"required"),g.qZA(),g.qZA())}function rt(t,e){1&t&&(g.TgZ(0,"mat-error"),g._uU(1," Price is "),g.TgZ(2,"strong"),g._uU(3,"required"),g.qZA(),g.qZA())}function at(t,e){1&t&&(g.TgZ(0,"mat-error"),g._uU(1," Base amount is "),g.TgZ(2,"strong"),g._uU(3,"required"),g.qZA(),g.qZA())}function ct(t,e){if(1&t&&(g.TgZ(0,"mat-option",17),g._uU(1),g.qZA()),2&t){var n=e.$implicit;g.Q6J("value",n.id),g.xp6(1),g.hij(" ",n.text," ")}}function lt(t,e){1&t&&(g.TgZ(0,"mat-error"),g._uU(1," Item unit is "),g.TgZ(2,"strong"),g._uU(3,"required"),g.qZA(),g.qZA())}function st(t,e){if(1&t&&(g.TgZ(0,"mat-option",17),g._uU(1),g.qZA()),2&t){var n=e.$implicit;g.Q6J("value",n.id),g.xp6(1),g.hij(" ",n.text," ")}}function ut(t,e){1&t&&(g.TgZ(0,"mat-error"),g._uU(1," Item unit is "),g.TgZ(2,"strong"),g._uU(3,"required"),g.qZA(),g.qZA())}var ft=function(){var t=function(){function t(e,n,o,i,r,a){u(this,t),this.route=e,this.formBuilder=n,this.offerService=o,this.location=i,this.store=r,this.snackBarService=a,this.isEdit=!1,this.itemTypes=[],this.unitsType=[],this.subscriptions=new J.w,this.itemId=""}return s(t,[{key:"ngOnDestroy",value:function(){this.subscriptions.unsubscribe()}},{key:"ngOnInit",value:function(){var t=this;this.subscriptions.add(this.store.select(N.wD).subscribe(function(e){t.itemTypes=e.map(function(t){return{value:t.itemType,text:t.itemType.toString().toLowerCase()}})})),this.subscriptions.add(this.store.select(N.r).subscribe(function(e){t.unitsType=e.map(function(t){return{value:t.itemUnit,text:t.itemUnit.toString().toLowerCase()}})})),this.subscriptions.add(this.route.queryParams.subscribe(function(e){t.itemId=e.id,void 0===t.itemId||""===t.itemId?(t.fomrHeader="offer.new-offer-item",t.isEdit=!1):(t.isEdit=!0,t.fomrHeader="offer.edit-offer-item")})),this.offerItemForm=this.formBuilder.group({name:new l.NI("",[l.kI.required]),description:new l.NI(""),price:new l.NI("",[l.kI.required]),baseAmount:new l.NI("",[l.kI.required]),units:new l.NI("",[l.kI.required]),itemType:new l.NI("",[l.kI.required])}),this.offerService.getOfferItemDetail(this.itemId).subscribe(function(e){var n,o,i,r;t.offerItem=e,t.offerItemForm.controls.name.setValue(null===(n=t.offerItem)||void 0===n?void 0:n.name),t.offerItemForm.controls.description.setValue(null===(o=t.offerItem)||void 0===o?void 0:o.description),t.offerItemForm.controls.price.setValue(t.offerItem.price?t.offerItem.price:null),t.offerItemForm.controls.baseAmount.setValue(t.offerItem.baseAmount?t.offerItem.baseAmount:null),t.offerItemForm.controls.units.setValue(String(null===(i=t.offerItem)||void 0===i?void 0:i.unit)),t.offerItemForm.controls.itemType.setValue(String(null===(r=t.offerItem)||void 0===r?void 0:r.itemType))})}},{key:"onSubmit",value:function(){var t;if(!this.offerItemForm.invalid){var e={id:null===(t=this.offerItem)||void 0===t?void 0:t.id,name:this.offerItemForm.controls.name.value,description:this.offerItemForm.controls.description.value,price:this.offerItemForm.controls.price.value,baseAmount:this.offerItemForm.controls.baseAmount.value,unit:this.offerItemForm.controls.units.value,itemType:this.offerItemForm.controls.itemType.value};this.store.dispatch(this.isEdit?G({item:e,effectCallback:this.snackBarService.showMessageApi}):B({item:e}))}}},{key:"navigateBack",value:function(){this.location.back()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(M.gz),g.Y36(l.qu),g.Y36(et),g.Y36(c.Ye),g.Y36(q.yh),g.Y36(nt.c))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-edit-offer-item"]],decls:47,vars:27,consts:[[1,"edit-form-container"],[1,"header"],["translate",""],[3,"formGroup","ngSubmit"],[1,"input-full-width"],["type","text","matInput","","formControlName","name",3,"placeholder"],[4,"ngIf"],["type","text","matInput","","formControlName","description",3,"placeholder"],["color","primary-text",1,"input-full-width"],["type","number","matInput","","formControlName","price",3,"placeholder"],["type","number","matInput","","formControlName","baseAmount",3,"placeholder"],["formControlName","units",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","itemType",3,"placeholder"],[1,"actions"],["mat-button","",1,"back-button",3,"click"],["mat-button","","type","submit",1,"primary-button"],[3,"value"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"span",2),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"form",3),g.NdJ("ngSubmit",function(){return e.onSubmit()}),g.TgZ(5,"mat-form-field",4),g.TgZ(6,"mat-label",2),g._uU(7,"offer.name"),g.qZA(),g._UZ(8,"input",5),g.ALo(9,"translate"),g.YNc(10,it,4,0,"mat-error",6),g.qZA(),g.TgZ(11,"mat-form-field",4),g.TgZ(12,"mat-label",2),g._uU(13,"offer.description"),g.qZA(),g._UZ(14,"input",7),g.ALo(15,"translate"),g.qZA(),g.TgZ(16,"mat-form-field",8),g.TgZ(17,"mat-label",2),g._uU(18,"offer.price"),g.qZA(),g._UZ(19,"input",9),g.ALo(20,"translate"),g.YNc(21,rt,4,0,"mat-error",6),g.qZA(),g.TgZ(22,"mat-form-field",8),g.TgZ(23,"mat-label",2),g._uU(24,"offer.base-amount"),g.qZA(),g._UZ(25,"input",10),g.ALo(26,"translate"),g.YNc(27,at,4,0,"mat-error",6),g.qZA(),g.TgZ(28,"mat-form-field",4),g.TgZ(29,"mat-select",11),g.ALo(30,"translate"),g.YNc(31,ct,2,2,"mat-option",12),g.qZA(),g.YNc(32,lt,4,0,"mat-error",6),g.qZA(),g.TgZ(33,"mat-form-field",4),g.TgZ(34,"mat-select",13),g.ALo(35,"translate"),g.YNc(36,st,2,2,"mat-option",12),g.qZA(),g.YNc(37,ut,4,0,"mat-error",6),g.qZA(),g.TgZ(38,"div",14),g.TgZ(39,"button",15),g.NdJ("click",function(){return e.navigateBack()}),g.TgZ(40,"mat-icon"),g._uU(41,"arrow_back"),g.qZA(),g.TgZ(42,"span",2),g._uU(43,"general.back"),g.qZA(),g.qZA(),g.TgZ(44,"button",16),g.TgZ(45,"span",2),g._uU(46,"general.save"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(3),g.Oqu(e.fomrHeader),g.xp6(1),g.Q6J("formGroup",e.offerItemForm),g.xp6(4),g.Q6J("placeholder",g.lcZ(9,15,"offer.name")),g.xp6(2),g.Q6J("ngIf",e.offerItemForm.controls.name.hasError("required")),g.xp6(4),g.Q6J("placeholder",g.lcZ(15,17,"offer.description")),g.xp6(5),g.Q6J("placeholder",g.lcZ(20,19,"offer.price")),g.xp6(2),g.Q6J("ngIf",e.offerItemForm.controls.price.hasError("required")),g.xp6(4),g.Q6J("placeholder",g.lcZ(26,21,"offer.base-amount")),g.xp6(2),g.Q6J("ngIf",e.offerItemForm.controls.baseAmount.hasError("required")),g.xp6(2),g.Q6J("placeholder",g.lcZ(30,23,"select.unit")),g.xp6(2),g.Q6J("ngForOf",e.unitsType),g.xp6(1),g.Q6J("ngIf",e.offerItemForm.controls.units.hasError("required")),g.xp6(2),g.Q6J("placeholder",g.lcZ(35,25,"select.type")),g.xp6(2),g.Q6J("ngForOf",e.itemTypes),g.xp6(1),g.Q6J("ngIf",e.offerItemForm.controls.itemType.hasError("required")))},directives:[F.Pi,l._Y,l.JL,l.sg,ot.KE,ot.hX,l.Fj,l.JJ,l.u,c.O5,l.wV,w.gD,c.sg,A.Hw,ot.TO,m.ey],pipes:[F.X$],styles:[".mat-step-header .mat-step-icon-selected,   .mat-step-header .mat-step-icon-state-done,   .mat-step-header .mat-step-icon-state-edit{background-color:#2d2d2d!important}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#2d2d2d!important}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#2d2d2d!important}  .mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick,   .mat-form-field-invalid .mat-select{color:#e53935!important;opacity:.8!important}  .mat-input-element .mat-select{caret-color:#2d2d2d!important}  .mat-form-field-invalid .mat-input-element,   .mat-form-field-invalid .mat-select,   .mat-warn .mat-input-element{caret-color:#e53935!important}  .mat-form-field-label{color:#2d2d2d!important}  .mat-form-field.mat-focused .mat-form-field-label{color:#2d2d2d!important}  .mat-form-field-invalid .mat-select-arrow,   .mat-form-field-invalid .mat-select-arrow-wrapper,   .mat-form-field-invalid .mat-select-value,   .mat-form-field.mat-form-field-invalid .mat-form-field-label{color:#e53935!important}  .mat-select-arrow,   .mat-select-arrow-wrapper,   .mat-select-value{color:#2d2d2d!important}.offer-item-form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.offer-item-form-actions[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background-color:#f5f5f5}.offer-form-container[_ngcontent-%COMP%]{width:80%;margin:auto}.offer-form-header[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:18px;font-weight:500}"]}),t}(),dt=(function(t){t.Beer="Beer",t.Alcohol="Alcohol",t.Drinks="Drink",t.Soda="Soda",t.Food="Food",t.IceCream="IceCream",t.Other="Other"}(dt||(dt={})),dt),gt=["categories"],mt=function(t){return{"category-item-active-2":t}};function pt(t,e){if(1&t){var n=g.EpF();g.TgZ(0,"div",6,7),g.NdJ("click",function(){var t=g.CHM(n).$implicit;return g.oxw().filterByCategory(t.value)}),g.TgZ(2,"h5",3),g._uU(3),g.qZA(),g.qZA()}if(2&t){var o=e.$implicit,i=g.oxw();g.MGl("id","category-",o.value,""),g.Q6J("ngClass",g.VKq(3,mt,i.isItemSelected(o.value))),g.xp6(3),g.hij(" ",i.getEnumTranslateKey("offer.category",o.text)," ")}}var ht=function(){var t=function(){function t(e){u(this,t),this.store=e,this.CATEGORY_STORAGE_KEY="filter_category",this.itemTypeChanged=new g.vpe,this.selectedItemType=null,this.subscriptions=new J.w}return s(t,[{key:"ngAfterViewInit",value:function(){var t,e=this,n=null===(t=this.categories)||void 0===t?void 0:t.find(function(t){return t.nativeElement.classList.contains("category-item-active")});n&&setTimeout(function(){e.scroll(n.nativeElement)})}},{key:"ngOnDestroy",value:function(){this.subscriptions.unsubscribe()}},{key:"ngOnInit",value:function(){var t=this;this.subscriptions.add(this.store.select(N.wD).subscribe(function(e){t.itemsCategories=null==e?void 0:e.map(function(t){return{value:t.itemType,text:t.itemType.toString().toLowerCase()}})}));var e=localStorage.getItem(this.CATEGORY_STORAGE_KEY);Object.values(dt).includes(e)||(e=null),this.selectedItemType=e,this.itemTypeChanged.emit(this.selectedItemType)}},{key:"filterByCategory",value:function(t){this.selectedItemType=this.itemsCategories.some(function(e){return e.value===t})?t:null,localStorage.setItem(this.CATEGORY_STORAGE_KEY,this.selectedItemType),this.itemTypeChanged.emit(this.selectedItemType)}},{key:"getItemIcon",value:function(t){return"assets/images/".concat(t.toLowerCase(),".svg")}},{key:"isItemSelected",value:function(t){return null===t?null===this.selectedItemType:this.selectedItemType===t}},{key:"getEnumTranslateKey",value:function(t,e){return"".concat(t,".").concat(e)}},{key:"scroll",value:function(t){t.scrollIntoView({behavior:"smooth"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(q.yh))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-offer-categories"]],viewQuery:function(t,e){var n;(1&t&&g.Gf(gt,5),2&t)&&(g.iGM(n=g.CRH())&&(e.categories=n))},outputs:{itemTypeChanged:"itemTypeChanged"},decls:8,vars:4,consts:[["translate","",1,"categories-header"],[1,"offer-categories-container"],[1,"offer-category-card-2",3,"ngClass","click"],["translate","",2,"margin-block-start","0.5em !important","margin-block-end","0.5em !important"],["class","offer-category-card-2",3,"id","ngClass","click",4,"ngFor","ngForOf"],[1,"offer-category-card-2-last"],[1,"offer-category-card-2",3,"id","ngClass","click"],["categories",""]],template:function(t,e){1&t&&(g.TgZ(0,"span",0),g._uU(1,"offer.categories"),g.qZA(),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g.NdJ("click",function(){return e.filterByCategory(null)}),g.TgZ(4,"h5",3),g._uU(5," offer.category.all "),g.qZA(),g.qZA(),g.YNc(6,pt,4,5,"div",4),g._UZ(7,"div",5),g.qZA()),2&t&&(g.xp6(3),g.Q6J("ngClass",g.VKq(2,mt,e.isItemSelected(null))),g.xp6(3),g.Q6J("ngForOf",e.itemsCategories))},directives:[F.Pi,c.mk,c.sg],styles:[".offer-categories-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto}.offer-category-card[_ngcontent-%COMP%]{margin:1em .3em;min-width:90px;min-height:90px;max-width:90px;max-height:90px;box-shadow:0 0 20px #e6e6e6;border-radius:10px;display:flex;align-items:center;flex-direction:column;justify-content:center}.offer-category-card-last[_ngcontent-%COMP%]{min-width:.2em!important}.offer-category-card-2[_ngcontent-%COMP%]{margin:1em .3em;background-color:#f5f7f9;border-radius:10px;display:flex;align-items:center;flex-direction:column;justify-content:center;padding:0 1em}.offer-category-card-2-last[_ngcontent-%COMP%]{min-width:.2em!important}.offer-category-card[_ngcontent-%COMP%] > object[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{width:30px;height:30px}.offer-category-card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:600}.category-item-active[_ngcontent-%COMP%], .category-item-active-2[_ngcontent-%COMP%]{transition:all .5s ease;background-color:#201d1e}.category-item-active-2[_ngcontent-%COMP%]{color:#f5f7f9}.categories-header[_ngcontent-%COMP%]{font-weight:900;margin-left:.6em}"]}),t}();function vt(t,e){if(1&t&&(g.TgZ(0,"mat-option",9),g._uU(1),g.qZA()),2&t){var n=e.$implicit;g.Q6J("value",n.id),g.xp6(1),g.hij(" ",n.name," ")}}var bt=function(){var e=function(){function e(t,n){u(this,e),this.dialogRef=t,this.data=n,this.itemTypes=[],this.itemTypeDictionary()}return s(e,[{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"itemTypeDictionary",value:function(){for(var e=0,n=Object.entries(dt);e<n.length;e++){var o=t(n[e],2),i=o[0],r=o[1];Number.isNaN(Number(i))&&this.itemTypes.push({id:r,name:i})}}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(x.so),g.Y36(x.WI))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-offer-filter-dialog"]],decls:17,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"width","100%","overflow","hidden"],["placeholder","Select type",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"margin","5px"],["labelPosition","after",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",1,"button-order-item",3,"mat-dialog-close"],[3,"value"]],template:function(t,e){1&t&&(g.TgZ(0,"h1",0),g._uU(1,"Filter offer items"),g.qZA(),g.TgZ(2,"div",1),g.TgZ(3,"mat-form-field"),g.TgZ(4,"mat-select",2),g.NdJ("ngModelChange",function(t){return e.data.type=t}),g.YNc(5,vt,2,2,"mat-option",3),g.qZA(),g.qZA(),g.TgZ(6,"div",4),g.TgZ(7,"mat-checkbox",5),g.NdJ("ngModelChange",function(t){return e.data.byName=t}),g._uU(8,"SortByName"),g.qZA(),g.qZA(),g.TgZ(9,"div",4),g.TgZ(10,"mat-checkbox",5),g.NdJ("ngModelChange",function(t){return e.data.byPrice=t}),g._uU(11,"SortByPrice"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"div",6),g.TgZ(13,"button",7),g.NdJ("click",function(){return e.onNoClick()}),g._uU(14,"No Thanks"),g.qZA(),g.TgZ(15,"button",8),g._uU(16,"Filter"),g.qZA(),g.qZA()),2&t&&(g.xp6(4),g.Q6J("ngModel",e.data.type),g.xp6(1),g.Q6J("ngForOf",e.itemTypes),g.xp6(2),g.Q6J("ngModel",e.data.byName),g.xp6(3),g.Q6J("ngModel",e.data.byPrice),g.xp6(5),g.Q6J("mat-dialog-close",e.data))},directives:[x.uh,x.xY,ot.KE,w.gD,l.JJ,l.On,c.sg,x.H8,x.ZT,m.ey],styles:[""]}),e}(),yt=a(9765),_t=a(5435),Tt=a(6782),kt=a(597),Zt=a(3975),It=(0,a(273).H)({selectId:function(t){return t.id}}),Ct=It.getInitialState(),Ot=(0,q.Lq)(Ct,(0,q.on)(V,function(t,e){return It.addMany(e.items,t)}),(0,q.on)(Y,function(t,e){return It.addOne(e.item,t)}),(0,q.on)(Q,function(t,e){return It.updateOne({id:e.item.id,changes:e.item},t)}),(0,q.on)(L,function(t,e){return It.removeAll(t)}),(0,q.on)(R,function(t,e){return It.removeAll(t)}),(0,q.on)(D,function(t,e){return It.removeOne(e.id,t)}));function xt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,e=arguments.length>1?arguments[1]:void 0;return Ot(t,e)}var At=(0,q.ZF)("offer"),wt=(0,q.P1)(At,function(t){return t.ids}),Mt=(0,q.P1)(At,function(t){return t.entities}),Pt=(0,q.P1)(Mt,wt,function(t,e){return e.map(function(e){return t[e]})}),qt=a(4136),Ft=a(283);function Et(t,e){if(1&t){var n=g.EpF();g.ynx(0),g.TgZ(1,"mat-icon",3),g.NdJ("click",function(){return g.CHM(n),g.oxw().toggleLike(!0)}),g._uU(2,"favorite_border"),g.qZA(),g.BQk()}}function St(t,e){if(1&t){var n=g.EpF();g.TgZ(0,"mat-icon",18),g.NdJ("click",function(){return g.CHM(n),g.oxw().toggleLike(!1)}),g._uU(1,"favorite"),g.qZA()}}function Ut(t,e){if(1&t&&(g.ynx(0),g.TgZ(1,"mat-button-toggle",21),g._uU(2),g.ALo(3,"translate"),g.ALo(4,"camelCase"),g.qZA(),g.BQk()),2&t){var n=e.$implicit;g.xp6(1),g.Q6J("value",n.type),g.xp6(1),g.Oqu(g.lcZ(3,2,"general."+g.lcZ(4,4,n.type)))}}function Jt(t,e){if(1&t){var n=g.EpF();g.TgZ(0,"div",9),g.TgZ(1,"div",10),g._uU(2,"offer.item.description-variation"),g.qZA(),g.TgZ(3,"div",11),g.TgZ(4,"mat-button-toggle-group",19),g.NdJ("ngModelChange",function(t){return g.CHM(n),g.oxw().selectedVariationType=t})("change",function(){return g.CHM(n),g.oxw().variationChanged()}),g.YNc(5,Ut,5,6,"ng-container",20),g.qZA(),g.qZA(),g.qZA()}if(2&t){var o=g.oxw();g.xp6(4),g.Q6J("ngModel",o.selectedVariationType),g.xp6(1),g.Q6J("ngForOf",o.offerItem.variations)}}var Nt=function(){var t=function(){function t(e,n,o,i,r,a,c){u(this,t),this.route=e,this.router=n,this.offerService=o,this.snackBar=i,this.store=r,this.actions=a,this.translate=c,this.destroy$=new yt.xQ,this.itemCount=1,this.countSum=0}return s(t,[{key:"priceByVariation",get:function(){var t,e,n=this;return(null===(e=null===(t=this.offerItem)||void 0===t?void 0:t.variations)||void 0===e?void 0:e.length)>1?this.offerItem.variations.find(function(t){return t.type===n.selectedVariationType}).price:this.offerItem.price}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnInit",value:function(){var t,e=this;this.itemId=this.route.snapshot.params.id,this.offerService.getOfferItemDetail(this.itemId).subscribe(function(t){var n,o;e.offerItem=t,e.selectedVariationType=(null===(n=e.offerItem.variations)||void 0===n?void 0:n.length)>1?null===(o=e.offerItem.variations[0])||void 0===o?void 0:o.type:void 0,e.countSum=e.itemCount*e.priceByVariation}),this.store.select((t=this.itemId,(0,q.P1)(Mt,function(e){return e[t]}))).pipe((0,_t.h)(function(t){return!!t}),(0,Tt.R)(this.destroy$)).subscribe(function(t){var n,o;e.offerItem=t,e.selectedVariationType=(null===(n=e.offerItem.variations)||void 0===n?void 0:n.length)>1?null===(o=e.offerItem.variations[0])||void 0===o?void 0:o.type:void 0,e.countSum=e.itemCount*e.priceByVariation})}},{key:"itemCountChanged",value:function(t){(t>0||this.itemCount>1&&t<0)&&(this.itemCount=this.itemCount+t,this.countSum=this.itemCount*this.priceByVariation)}},{key:"navigateToOffer",value:function(){this.router.navigate(["/offer"])}},{key:"addItemsToCart",value:function(){var t=this;this.actions.pipe((0,P.l4)(kt.G6),(0,Tt.R)(this.destroy$)).subscribe(function(){t.snackBar.showMessage(t.translate.instant("cart.item.added"),"",Zt.C.Info)}),this.store.dispatch((0,kt.dm)({item:{cartItemId:"",offerItemId:this.offerItem.id,orderedAmount:this.itemCount,selectedVariation:this.selectedVariationType,price:this.priceByVariation,name:this.offerItem.name,thumbnail:this.offerItem.thumbnailUrl}}))}},{key:"variationChanged",value:function(){this.countSum=this.itemCount*this.priceByVariation}},{key:"toggleLike",value:function(t){this.store.dispatch(H({id:this.offerItem.id,favorite:t}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(M.gz),g.Y36(M.F0),g.Y36(et),g.Y36(nt.c),g.Y36(q.yh),g.Y36(P.eX),g.Y36(F.sK))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-offer-item-detail"]],decls:38,vars:11,consts:[[1,"detail-image"],[3,"src"],[1,"detail-icons"],[3,"click"],[4,"ngIf","ngIfElse"],["liked",""],[1,"card"],[1,"title"],[1,"content"],[1,"part"],["translate","",1,"part","header"],[1,"part","content"],["class","part",4,"ngIf"],[1,"amount"],[1,"count"],[1,"actions"],[1,"action-container"],["type","Primary",1,"add-to-cart",3,"clicked"],[1,"liked-item",3,"click"],["name","variations","aria-label","Variations",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],["checked","",3,"value"]],template:function(t,e){if(1&t&&(g.TgZ(0,"div",0),g._UZ(1,"img",1),g.TgZ(2,"div",2),g.TgZ(3,"mat-icon",3),g.NdJ("click",function(){return e.navigateToOffer()}),g._uU(4,"arrow_back"),g.qZA(),g.YNc(5,Et,3,0,"ng-container",4),g.YNc(6,St,2,0,"ng-template",null,5,g.W1O),g.qZA(),g.qZA(),g.TgZ(8,"div",6),g.TgZ(9,"div",7),g._uU(10),g.qZA(),g.TgZ(11,"div",8),g.TgZ(12,"div",9),g.TgZ(13,"div",10),g._uU(14,"offer.item.description-header"),g.qZA(),g.TgZ(15,"div",11),g._uU(16),g.qZA(),g.qZA(),g.TgZ(17,"div",9),g.TgZ(18,"div",10),g._uU(19,"offer.item.description-alergens"),g.qZA(),g.TgZ(20,"div",11),g._uU(21,"ToDo"),g.qZA(),g.qZA(),g.YNc(22,Jt,6,2,"div",12),g.TgZ(23,"div",13),g.TgZ(24,"mat-icon",3),g.NdJ("click",function(){return e.itemCountChanged(1)}),g._uU(25,"add"),g.qZA(),g.TgZ(26,"span",14),g._uU(27),g.qZA(),g.TgZ(28,"mat-icon",3),g.NdJ("click",function(){return e.itemCountChanged(-1)}),g._uU(29,"remove"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(30,"div",15),g.TgZ(31,"div",16),g.TgZ(32,"rm-button",17),g.NdJ("clicked",function(){return e.addItemsToCart()}),g.TgZ(33,"mat-icon"),g._uU(34,"add_shopping_cart"),g.qZA(),g.TgZ(35,"span"),g._uU(36),g.ALo(37,"currency"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t){var n=g.MAs(7);g.xp6(1),g.Q6J("src",e.offerItem.imageUrl,g.LSH),g.xp6(4),g.Q6J("ngIf",e.offerItem.favorite)("ngIfElse",n),g.xp6(5),g.Oqu(null==e.offerItem?null:e.offerItem.name),g.xp6(6),g.hij(" ",null==e.offerItem?null:e.offerItem.description," "),g.xp6(6),g.Q6J("ngIf",(null==e.offerItem.variations?null:e.offerItem.variations.length)>1),g.xp6(5),g.Oqu(e.itemCount),g.xp6(9),g.hij("\xa0\xa0",g.xi3(37,8,e.countSum,"EUR"),"")}},directives:[A.Hw,c.O5,F.Pi,qt.r,Z,l.JJ,l.On,c.sg,C],pipes:[c.H9,F.X$,Ft.h],styles:["[_nghost-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{border-radius:4px;margin-right:12px;padding:0 4px;border:1px solid #dcdcdc;font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}[_nghost-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%] > mat-button-toggle[_ngcontent-%COMP%]{display:flex;height:30px;align-items:center}.body-content[_ngcontent-%COMP%]{margin:0!important}.add-to-cart[_ngcontent-%COMP%]{border-radius:10px;font-size:18px;font-weight:600!important}.add-to-cart[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:.3em}.detail-image[_ngcontent-%COMP%]{height:40%;width:100%}.detail-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:250px;display:flex}.card[_ngcontent-%COMP%]{min-height:calc(100% - 40% - 4em);margin-top:-20px;border-radius:10px 10px 10px 10px;width:95%;position:relative;background-color:#fff;margin-bottom:3.5em;padding-bottom:1em;display:inline-block;transform:translate(2.5%);box-shadow:0 0 60px #959595}.card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:1em 1em .5em;font-weight:700;text-align:center}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .part[_ngcontent-%COMP%]{font-size:18px;line-height:2em;padding:0 1em 1em}.card[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .part[_ngcontent-%COMP%]:first-child{margin-top:2em}.part.header[_ngcontent-%COMP%]{font-weight:700;padding:unset!important}.part.content[_ngcontent-%COMP%]{line-height:1em!important;padding:unset!important;margin:unset!important}.part.content[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.part.content[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{flex:1 1 33%}.amount[_ngcontent-%COMP%]{background-color:#e81010;width:40px;height:100px;position:absolute;top:0;right:30px;display:flex;flex-direction:column;padding:.4em 0;border-radius:0 0 15px 15px;color:#fff;justify-content:space-around;text-align:center}.amount[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{border:none;margin:0 auto}.actions[_ngcontent-%COMP%]{display:flex;margin-top:1em}.actions[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]{width:100%;display:flex;position:relative;justify-content:center}.detail-icons[_ngcontent-%COMP%]{position:absolute;top:0;color:#fff;margin-top:.5em;display:flex;justify-content:space-between;width:calc(100% - 2em);padding:0 1em}.detail-icons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:#f5f7f9;color:#201d1e;padding:2%;border-radius:10px}.liked-item[_ngcontent-%COMP%]{color:#e81010!important;background-color:#f5f7f9}"]}),t}(),Vt=a(7780),Bt=function(){var t=function(){function t(){u(this,t)}return s(t,[{key:"transform",value:function(t,e){return null!=e.type&&(t=t.filter(function(t){return t.itemType===e.type})),e.searchOptions.length>0&&(t=t.filter(function(t){return e.searchOptions.some(function(e){return t.name.toLowerCase().includes(e)})})),t}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=g.Yjl({name:"offerFilter",type:t,pure:!1}),t}(),Yt=["promoVideo"];function Gt(t,e){1&t&&(g.TgZ(0,"mat-icon"),g._uU(1,"play_arrow"),g.qZA())}function Qt(t,e){1&t&&(g.TgZ(0,"mat-icon"),g._uU(1,"pause"),g.qZA())}function Rt(t,e){1&t&&g._UZ(0,"app-offer-item",14),2&t&&g.Q6J("offerItem",e.$implicit)}var Lt,jt=function(){var t=function(){function t(e,n,o){u(this,t),this.dialog=e,this.formBuilder=n,this.store=o,this.offerItems=[],this.isVideoPlaying=!1,this.subscriptions=new J.w,this.filterModel={type:null,searchOptions:[],byPrice:!1,byName:!0}}return s(t,[{key:"ngAfterViewInit",value:function(){var t=this;this.promo&&(this.promo.nativeElement.onended=function(){t.isVideoPlaying=!1},this.promo.nativeElement.onpause=function(){t.isVideoPlaying=!1},this.promo.nativeElement.onplaying=function(){t.isVideoPlaying=!0})}},{key:"ngOnDestroy",value:function(){this.subscriptions.unsubscribe()}},{key:"ngOnInit",value:function(){var t=this;this.subscriptions.add(this.store.select(Pt).subscribe(function(e){t.offerItems=e})),this.offerItemSearchForm=this.formBuilder.group({search:new l.NI("")}),this.store.dispatch(L())}},{key:"openDialog",value:function(){var t=this,e=this.dialog.open(bt,{width:"300px",data:Object.assign({},this.filterModel),autoFocus:!1});this.subscriptions.add(e.afterClosed().subscribe(function(e){void 0!==e&&(console.log(e),t.filterModel=e)}))}},{key:"onSubmit",value:function(){var t=this.offerItemSearchForm.controls.search.value.toLowerCase().split(" ");this.filterModel.searchOptions=t}},{key:"filterByItemType",value:function(t){this.filterModel.type=t}},{key:"playVideo",value:function(){this.isVideoPlaying?this.promo.nativeElement.pause():this.promo.nativeElement.play()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(x.uw),g.Y36(l.qu),g.Y36(q.yh))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-offer"]],viewQuery:function(t,e){var n;(1&t&&g.Gf(Yt,5),2&t)&&(g.iGM(n=g.CRH())&&(e.promo=n.first))},hostVars:2,hostBindings:function(t,e){2&t&&g.ekj("hide-input",e.isVideoPlaying)},decls:20,vars:10,consts:[[1,"video-container"],["width","100%","height","auto",2,"display","block"],["promoVideo",""],["src","assets/videos/promo.mp4","type","video/mp4"],[1,"video-overlay",3,"click"],[4,"ngIf"],[1,"offer-item-search"],[1,"offer-item-search-form",3,"formGroup","ngSubmit"],[1,"search-icon-container",3,"click"],["formControlName","search",1,"search-input",3,"placeholder"],[1,"offer-body"],[3,"itemTypeChanged"],[1,"offer-item-container-2"],[3,"offerItem",4,"ngFor","ngForOf"],[3,"offerItem"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"video",1,2),g._UZ(3,"source",3),g.qZA(),g.TgZ(4,"div",4),g.NdJ("click",function(){return e.playVideo()}),g.YNc(5,Gt,2,0,"mat-icon",5),g.YNc(6,Qt,2,0,"mat-icon",5),g.qZA(),g.qZA(),g.TgZ(7,"div",6),g.TgZ(8,"form",7),g.NdJ("ngSubmit",function(){return e.onSubmit()}),g.TgZ(9,"div",8),g.NdJ("click",function(){return e.onSubmit()}),g.TgZ(10,"mat-icon"),g._uU(11,"search"),g.qZA(),g.qZA(),g._UZ(12,"input",9),g.ALo(13,"translate"),g.qZA(),g.qZA(),g.TgZ(14,"div",10),g.TgZ(15,"div"),g.TgZ(16,"app-offer-categories",11),g.NdJ("itemTypeChanged",function(t){return e.filterByItemType(t)}),g.qZA(),g.TgZ(17,"div",12),g.YNc(18,Rt,1,1,"app-offer-item",13),g.ALo(19,"offerFilter"),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(5),g.Q6J("ngIf",!e.isVideoPlaying),g.xp6(1),g.Q6J("ngIf",e.isVideoPlaying),g.xp6(2),g.Q6J("formGroup",e.offerItemSearchForm),g.xp6(4),g.Q6J("placeholder",g.lcZ(13,5,"general.search")),g.xp6(6),g.Q6J("ngForOf",g.xi3(19,7,e.offerItems,e.filterModel)))},directives:[c.O5,l._Y,l.JL,l.sg,A.Hw,l.Fj,l.JJ,l.u,ht,c.sg,Vt.u],pipes:[F.X$,Bt],styles:[".hide-input[_nghost-%COMP%]   .offer-item-search[_ngcontent-%COMP%]{transition:all .3s ease;opacity:.2}.offer-filter-button[_ngcontent-%COMP%]{margin-bottom:5px;width:10%;height:50%;padding:0;min-width:unset;align-self:center;margin-left:1em}.offer-item-search-container[_ngcontent-%COMP%]{display:flex;padding-right:.5em}.offer-item-search-form[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;display:flex}.offer-item-container[_ngcontent-%COMP%]{margin:1%;grid-column-gap:.5em;-moz-column-gap:.5em;column-gap:.5em;grid-row-gap:.5em;row-gap:.5em;display:flex;flex-wrap:wrap}.offer-item-container-2[_ngcontent-%COMP%]{margin:2%;display:flex;flex-wrap:wrap}.offer-body[_ngcontent-%COMP%]{margin:-20px 2% 2%;padding-bottom:4em}.video-overlay[_ngcontent-%COMP%]{position:absolute;color:#fff;top:2em;width:100%;height:200px;display:flex;bottom:0;justify-content:center;left:0}.video-overlay[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:absolute;top:calc(30%);width:40px;height:40px;font-size:40px}.video-container[_ngcontent-%COMP%]{width:100%;position:relative}.offer-item-search[_ngcontent-%COMP%]{position:relative;top:-40px;height:50px;margin:0 1em;background-color:#fff;border-radius:5px;padding:5px;box-shadow:0 0 60px #959595}.search-input[_ngcontent-%COMP%]{width:90%;height:90%;outline:none;font-size:20px;border:none;padding-top:.3em}.search-icon-container[_ngcontent-%COMP%]{vertical-align:middle;margin-top:auto;margin-bottom:auto;width:15%;height:100%;color:#2d2d2d;display:flex}.search-icon-container[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin:auto;font-size:28px}"]}),t}(),Dt=a(3190),Ht=a(9773),Kt=a(2232),$t=function(){var t=function t(e,n){var o=this;u(this,t),this.action$=e,this.http=n,this.logPrefix="offerActions.",this.loadingRestaurantOfferItems=(0,P.GW)(function(){return o.action$.pipe((0,P.l4)(L),(0,Dt.w)(function(t){return o.http.get(o.baseUrl).pipe((0,$.U)(function(t){return V({items:t.data})}),(0,z.K)(function(t){return console.log(t),(0,K.of)((0,Kt.Ey)({error:t.error.Message,msg:"Item reload failed",action:"loadItemForLoggedRestaurant"}))}))}))}),this.deleteOfferItem=(0,P.GW)(function(){return o.action$.pipe((0,P.l4)(j),(0,Dt.w)(function(t){return o.http.delete("".concat(o.baseUrl,"/").concat(t.id)).pipe((0,$.U)(function(e){return D({id:t.id})}),(0,z.K)(function(t){return(0,K.of)((0,Kt.Ey)({error:t.error.Message,msg:"Item delete failed",action:"deleteOfferItem"}))}))}))}),this.addNewOfferItem=(0,P.GW)(function(){return o.action$.pipe((0,P.l4)(B),(0,Dt.w)(function(t){return o.http.post(o.baseUrl,t.item).pipe((0,$.U)(function(t){return Y({item:t.data})}),(0,z.K)(function(t){return(0,K.of)((0,Kt.Ey)({error:t.error.Message,msg:"Item add failed",action:"addOfferItem"}))}))}))}),this.updateOfferItem=(0,P.GW)(function(){return o.action$.pipe((0,P.l4)(G),(0,Ht.zg)(function(t){return o.http.patch(o.baseUrl,t.item).pipe((0,Ht.zg)(function(t){return[(0,Kt.Oy)({msg:"Super",navigateBack:!0}),Q({item:t.data})]}),(0,z.K)(function(t){var e;return(0,K.of)((0,Kt.Ey)({error:null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.Message,msg:"Item edit failed",action:"editOfferItem"}))}))}))}),this.baseUrl="".concat(X.N.apiUrl,"/api/offerItem")};return t.\u0275fac=function(e){return new(e||t)(g.LFG(P.eX),g.LFG(W.eN))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t}(),zt=[{path:"",component:jt,canActivate:[S.a],data:{animation:"offer"}},{path:"add",component:ft,canActivate:[S.a,U.V],data:{animation:"offer-sub"}},{path:"edit/:id",component:ft,canActivate:[S.a,U.V],data:{animation:"offer-sub"}},{path:"detail/:id",component:Nt,canActivate:[S.a],data:{animation:"offer-sub"}}],Xt=[et],Wt=((Lt=function t(){u(this,t)}).\u0275fac=function(t){return new(t||Lt)},Lt.\u0275mod=g.oAB({type:Lt}),Lt.\u0275inj=g.cJS({providers:[Xt],imports:[[c.ez,E.a,A.Ps,l.UX,l.u5,x.Is,F.aw,O,w.LD,M.Bz.forChild(zt),q.Aw.forFeature("offer",xt),P.sQ.forFeature([$t])]]}),Lt)}}])}();