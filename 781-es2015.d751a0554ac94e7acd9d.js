(self.webpackChunkrestaurant_manager=self.webpackChunkrestaurant_manager||[]).push([[781],{9781:function(t,r,e){"use strict";e.r(r),e.d(r,{RestaurantModul:function(){return at}});var a=e(8583),s=e(3679),n=e(1095),i=e(3738),o=e(7539),u=e(2458),c=e(2238),l=e(6627),d=e(9983),p=e(2613),m=e(7441),h=e(4436),Z=e(6458),g=e(5987),f=e(1601),q=e(3065),v=e(2579),A=e(7574),b=e(5319),T=e(721),U=e(3929),y=e(6667),_=e(7716),w=e(8295);function k(t,r){1&t&&(_.TgZ(0,"span"),_._uU(1,"Edit restaurant"),_.qZA())}function N(t,r){1&t&&(_.TgZ(0,"span"),_._uU(1,"New restaurant"),_.qZA())}function F(t,r){1&t&&(_.TgZ(0,"mat-error"),_._uU(1," Name is "),_.TgZ(2,"strong"),_._uU(3,"required"),_.qZA(),_.qZA())}function I(t,r){if(1&t&&(_.TgZ(0,"mat-option",15),_._uU(1),_.qZA()),2&t){const t=r.$implicit;_.Q6J("value",t.id.toLowerCase()),_.xp6(1),_.hij(" ",t.name," ")}}function Y(t,r){1&t&&(_.TgZ(0,"mat-error"),_._uU(1," Country is "),_.TgZ(2,"strong"),_._uU(3,"required"),_.qZA(),_.qZA())}function D(t,r){1&t&&(_.TgZ(0,"mat-error"),_._uU(1," City is "),_.TgZ(2,"strong"),_._uU(3,"required"),_.qZA(),_.qZA())}function J(t,r){1&t&&(_.TgZ(0,"mat-error"),_._uU(1," Street is "),_.TgZ(2,"strong"),_._uU(3,"required"),_.qZA(),_.qZA())}function x(t,r){1&t&&(_.TgZ(0,"mat-error"),_._uU(1," Zip code is "),_.TgZ(2,"strong"),_._uU(3,"required"),_.qZA(),_.qZA())}let R=(()=>{class t{constructor(t,r,e,a){this.formBuilder=t,this.location=r,this.route=e,this.store=a,this.isEdit=!1,this.subscriptions=new b.w,this.countries=[]}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.subscriptions.add(this.store.select(T.ox).subscribe(t=>{this.countries=t})),this.restaurantForm=this.formBuilder.group({name:new s.NI("",[s.kI.required]),country:new s.NI("",[s.kI.required]),city:new s.NI("",[s.kI.required]),street:new s.NI("",[s.kI.required]),zipcode:new s.NI("",[s.kI.required])}),this.subscriptions.add(this.store.select((0,y.nO)(this.route.snapshot.params.id)).subscribe(t=>{var r,e;this.restaurant=t,this.isEdit=void 0!==(null===(r=this.restaurant)||void 0===r?void 0:r.id)&&""!==(null===(e=this.restaurant)||void 0===e?void 0:e.id),this.restaurant&&(this.restaurantForm.controls.name.setValue(this.restaurant.name),this.restaurantForm.controls.country.setValue(this.restaurant.countryId),this.restaurantForm.controls.city.setValue(this.restaurant.city),this.restaurantForm.controls.street.setValue(this.restaurant.street),this.restaurantForm.controls.zipcode.setValue(this.restaurant.zipCode))}))}navigateBack(){this.location.back()}onSubmit(){var t;if(this.restaurantForm.invalid)return;const r={id:null===(t=this.restaurant)||void 0===t?void 0:t.id,name:this.restaurantForm.controls.name.value,countryId:this.restaurantForm.controls.country.value,city:this.restaurantForm.controls.city.value,street:this.restaurantForm.controls.street.value,zipCode:this.restaurantForm.controls.zipcode.value};this.store.dispatch(this.isEdit?(0,U.i1)({restaurant:r}):(0,U.mu)({restaurant:r}))}}return t.\u0275fac=function(r){return new(r||t)(_.Y36(s.qu),_.Y36(a.Ye),_.Y36(g.gz),_.Y36(q.yh))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-edit-restaurant"]],decls:38,vars:9,consts:[[1,"edit-form-container"],[1,"header"],[4,"ngIf"],[3,"formGroup"],[1,"input-full-width"],["matInput","","placeholder","Name","formControlName","name"],["placeholder","Select country","formControlName","country"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","City","formControlName","city"],["matInput","","placeholder","Street","formControlName","street"],["matInput","","placeholder","Zip code","formControlName","zipcode"],[1,"actions"],["mat-button","",1,"back-button",3,"click"],["mat-button","",1,"primary-button",3,"click"],[3,"value"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.YNc(2,k,2,0,"span",2),_.YNc(3,N,2,0,"span",2),_.qZA(),_.TgZ(4,"form",3),_.TgZ(5,"mat-form-field",4),_.TgZ(6,"mat-label"),_._uU(7,"Name"),_.qZA(),_._UZ(8,"input",5),_.YNc(9,F,4,0,"mat-error",2),_.qZA(),_.TgZ(10,"mat-form-field",4),_.TgZ(11,"mat-select",6),_.TgZ(12,"mat-option",7),_._uU(13,"Choose country"),_.qZA(),_.YNc(14,I,2,2,"mat-option",8),_.qZA(),_.YNc(15,Y,4,0,"mat-error",2),_.qZA(),_.TgZ(16,"mat-form-field",4),_.TgZ(17,"mat-label"),_._uU(18,"City"),_.qZA(),_._UZ(19,"input",9),_.YNc(20,D,4,0,"mat-error",2),_.qZA(),_.TgZ(21,"mat-form-field",4),_.TgZ(22,"mat-label"),_._uU(23,"Street"),_.qZA(),_._UZ(24,"input",10),_.YNc(25,J,4,0,"mat-error",2),_.qZA(),_.TgZ(26,"mat-form-field",4),_.TgZ(27,"mat-label"),_._uU(28,"Zip code"),_.qZA(),_._UZ(29,"input",11),_.YNc(30,x,4,0,"mat-error",2),_.qZA(),_.TgZ(31,"div",12),_.TgZ(32,"button",13),_.NdJ("click",function(){return r.navigateBack()}),_.TgZ(33,"mat-icon"),_._uU(34,"arrow_back"),_.qZA(),_._uU(35," Back "),_.qZA(),_.TgZ(36,"button",14),_.NdJ("click",function(){return r.onSubmit()}),_._uU(37," Save "),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t&&(_.xp6(2),_.Q6J("ngIf",r.isEdit),_.xp6(1),_.Q6J("ngIf",!r.isEdit),_.xp6(1),_.Q6J("formGroup",r.restaurantForm),_.xp6(5),_.Q6J("ngIf",r.restaurantForm.controls.name.hasError("required")),_.xp6(5),_.Q6J("ngForOf",r.countries),_.xp6(1),_.Q6J("ngIf",r.restaurantForm.controls.country.hasError("required")),_.xp6(5),_.Q6J("ngIf",r.restaurantForm.controls.city.hasError("required")),_.xp6(5),_.Q6J("ngIf",r.restaurantForm.controls.street.hasError("required")),_.xp6(5),_.Q6J("ngIf",r.restaurantForm.controls.zipcode.hasError("required")))},directives:[a.O5,s._Y,s.JL,s.sg,w.KE,w.hX,d.Nt,s.Fj,s.JJ,s.u,m.gD,u.ey,a.sg,n.lW,l.Hw,w.TO],styles:[""]}),t})();var O=e(5917),C=e(3190),E=e(8002),Q=e(5304),z=e(2340),G=e(2232),S=e(1841);let L=(()=>{class t{constructor(t,r){this.action$=t,this.http=r,this.baseUrl="",this.loadRestaurants$=(0,f.GW)(()=>this.action$.pipe((0,f.l4)(U.ny),(0,C.w)(t=>this.http.get(this.baseUrl).pipe((0,E.U)(t=>(0,U.F3)({items:t.data})),(0,Q.K)(t=>(0,O.of)((0,G.Ey)({error:t.error.Message,msg:"Load restaurants failed",action:"loadRestaurants"}))))))),this.updateRestaurant$=(0,f.GW)(()=>this.action$.pipe((0,f.l4)(U.i1),(0,C.w)(t=>this.http.patch(this.baseUrl,t.restaurant).pipe((0,E.U)(t=>(0,U.UA)({restaurant:t.data})),(0,Q.K)(t=>(0,O.of)((0,G.Ey)({error:t.error.Message,msg:"Restaurant update failed",action:"updateRestaurant"}))))))),this.createRestaurant$=(0,f.GW)(()=>this.action$.pipe((0,f.l4)(U.mu),(0,C.w)(t=>this.http.post(this.baseUrl,t.restaurant).pipe((0,E.U)(t=>(0,U.Y0)({restaurant:t.data})),(0,Q.K)(t=>(0,O.of)((0,G.Ey)({error:t.error.Message,msg:"Restaurant create failed",action:"createRestaurant"}))))))),this.baseUrl=`${z.N.apiUrl}/api/Restaurant/`}}return t.\u0275fac=function(r){return new(r||t)(_.LFG(f.eX),_.LFG(S.eN))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac}),t})();var B=e(8230);let $=(()=>{class t{constructor(t){this.store=t}resolve(t,r){return this.refresh(r.url)&&(this.previousUrl=r.url,this.reloadData(t)),this.previousUrl=r.url,(0,O.of)(!0)}refresh(t){return!this.previousUrl||this.previousUrl===t}reloadData(t){this.store.dispatch((0,U.ny)())}}return t.\u0275fac=function(r){return new(r||t)(_.LFG(q.yh))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac}),t})();var W=e(3997),X=e(5136);let j=(()=>{class t{constructor(t,r,e,a,s,n){this.router=t,this.location=r,this.route=e,this.dialog=a,this.store=s,this.baseService=n,this.subscriptions=new b.w}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.subscriptions.add(this.store.select((0,y.ar)(this.route.snapshot.params.id)).subscribe(t=>{this.restaurantDetail=t}))}navigateBack(){this.location.back()}deleteRestaurant(){this.dialog.open(W.S,{width:"300px",data:{message:"Delete restaurant"},autoFocus:!1}).afterClosed().subscribe(t=>{void 0!==t&&!0===t&&this.store.dispatch((0,U.T)({id:this.restaurantDetail.id,successCallback:this.baseService.navigateBackWithTimeout}))})}editRestaurant(){this.router.navigate(["restaurants/edit",this.restaurantDetail.id])}}return t.\u0275fac=function(r){return new(r||t)(_.Y36(g.F0),_.Y36(a.Ye),_.Y36(g.gz),_.Y36(c.uw),_.Y36(q.yh),_.Y36(X.b))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-restaurant-detail"]],decls:22,vars:5,consts:[[1,"detail-header"],[1,"detail-image"],["matRipple","",3,"click"],["src","./assets/images/image_not_found2.jpg"],[1,"detail-description"],[1,"name"],[1,"description"],[1,"actions"],["mat-button","",1,"danger-button",3,"click"],["mat-button","",1,"primary-button",3,"click"]],template:function(t,r){1&t&&(_._UZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"mat-icon",2),_.NdJ("click",function(){return r.navigateBack()}),_._uU(3,"keyboard_backspace"),_.qZA(),_._UZ(4,"img",3),_.qZA(),_.TgZ(5,"div",4),_.TgZ(6,"div",5),_.TgZ(7,"span"),_._uU(8),_.qZA(),_.qZA(),_.TgZ(9,"div",6),_._uU(10),_.qZA(),_.TgZ(11,"div",6),_._uU(12),_.qZA(),_.TgZ(13,"div",6),_._uU(14),_.qZA(),_.TgZ(15,"div",6),_._uU(16),_.qZA(),_.TgZ(17,"div",7),_.TgZ(18,"button",8),_.NdJ("click",function(){return r.deleteRestaurant()}),_._uU(19," Delete restaurant "),_.qZA(),_.TgZ(20,"button",9),_.NdJ("click",function(){return r.editRestaurant()}),_._uU(21," Edit restaurant "),_.qZA(),_.qZA(),_.qZA()),2&t&&(_.xp6(8),_.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.name),_.xp6(2),_.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.countryName),_.xp6(2),_.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.city),_.xp6(2),_.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.street),_.xp6(2),_.Oqu(null==r.restaurantDetail?null:r.restaurantDetail.zipCode))},directives:[l.Hw,u.wG,n.lW],styles:[".body-content{margin:0!important}.actions{display:flex;justify-content:space-around}"],encapsulation:2}),t})();var K=e(391);let V=(()=>{class t{constructor(t,r){this.router=t,this.store=r}ngOnInit(){}openDetail(t){this.store.dispatch((0,U.Lc)({id:t})),this.router.navigate(["restaurants/detail",t])}}return t.\u0275fac=function(r){return new(r||t)(_.Y36(g.F0),_.Y36(q.yh))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-restaurant-item"]],inputs:{restaurant:"restaurant"},decls:11,vars:4,consts:[["matRipple","",1,"list-item-content",3,"click"],[1,"list-item-header"],[1,"list-item-name"],[1,"offer-item-price"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0),_.NdJ("click",function(){return r.openDetail(r.restaurant.id)}),_.TgZ(1,"div",1),_.TgZ(2,"div"),_.TgZ(3,"div"),_.TgZ(4,"h3",2),_._uU(5),_.qZA(),_.qZA(),_.TgZ(6,"div",3),_.TgZ(7,"span"),_._uU(8),_.ALo(9,"addressWithCountry"),_.qZA(),_._uU(10," \xa0 "),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t&&(_.xp6(5),_.hij(" ",r.restaurant.name," "),_.xp6(3),_.Oqu(_.lcZ(9,2,r.restaurant)))},directives:[u.wG],pipes:[K.O],styles:[""]}),t})(),M=(()=>{class t{transform(t,r){return null!=t&&t.sort(r.nameAsc?(t,r)=>t.name<r.name?1:t.name>r.name?-1:0:(t,r)=>t.name>r.name?1:t.name<r.name?-1:0),t}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=_.Yjl({name:"restaurantSort",type:t,pure:!0}),t})();function H(t,r){1&t&&(_.TgZ(0,"mat-icon"),_._uU(1,"arrow_drop_down"),_.qZA())}function P(t,r){1&t&&(_.TgZ(0,"mat-icon"),_._uU(1,"arrow_drop_up"),_.qZA())}function tt(t,r){1&t&&_._UZ(0,"app-restaurant-item",6),2&t&&_.Q6J("restaurant",r.$implicit)}const rt=function(t){return{nameAsc:t}},et=[{path:"",component:(()=>{class t{constructor(t,r){this.router=t,this.store=r,this.subscriptions=new b.w,this.sortAscDesc=!0}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.store.dispatch((0,U.ny)()),this.store.dispatch((0,U.Lc)({id:null})),this.subscriptions.add(this.store.select(y.hN).subscribe(t=>{this.restaurants=t}))}addNewRestaurant(){this.router.navigate(["restaurants/add"])}sortRestaurants(){this.sortAscDesc=!this.sortAscDesc}}return t.\u0275fac=function(r){return new(r||t)(_.Y36(g.F0),_.Y36(q.yh))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-restaurant"]],decls:14,vars:8,consts:[[1,"restaurant-content"],[1,"header-container"],["matRipple","",1,"sort-item",3,"click"],[4,"ngIf"],["mat-button","",1,"base-button",3,"click"],[3,"restaurant",4,"ngFor","ngForOf"],[3,"restaurant"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_.NdJ("click",function(){return r.sortRestaurants()}),_.TgZ(3,"span"),_._uU(4,"Name"),_.qZA(),_._uU(5," \xa0 "),_.YNc(6,H,2,0,"mat-icon",3),_.YNc(7,P,2,0,"mat-icon",3),_.qZA(),_.TgZ(8,"button",4),_.NdJ("click",function(){return r.addNewRestaurant()}),_._uU(9," New \xa0"),_.TgZ(10,"mat-icon"),_._uU(11,"add"),_.qZA(),_.qZA(),_.qZA(),_.YNc(12,tt,1,1,"app-restaurant-item",5),_.ALo(13,"restaurantSort"),_.qZA()),2&t&&(_.xp6(6),_.Q6J("ngIf",r.sortAscDesc),_.xp6(1),_.Q6J("ngIf",!r.sortAscDesc),_.xp6(5),_.Q6J("ngForOf",_.xi3(13,3,r.restaurants,_.VKq(6,rt,r.sortAscDesc))))},directives:[u.wG,a.O5,n.lW,l.Hw,a.sg,V],pipes:[M],styles:[""]}),t})()},{path:"add",component:R,canActivate:[A.a],resolve:{result:$},runGuardsAndResolvers:"always"},{path:"edit/:id",component:R,canActivate:[A.a],resolve:{result:$},runGuardsAndResolvers:"always"},{path:"detail/:id",component:j,canActivate:[A.a],resolve:{result:$},runGuardsAndResolvers:"always"}];let at=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({providers:[$],imports:[[v.a,q.Aw.forFeature(B.k,B.J),f.sQ.forFeature([L]),g.Bz.forChild(et),a.ez,s.u5,m.LD,p.Fk,s.UX,o.p9,c.Is,h.KP,l.Ps,n.ot,i.QW,d.c,u.si,Z.ZX]]}),t})()}}]);