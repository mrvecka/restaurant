(self.webpackChunkrestaurant_manager=self.webpackChunkrestaurant_manager||[]).push([[655],{6655:function(t,e,o){"use strict";o.r(e),o.d(e,{OfferModul:function(){return Dt}});var i=o(8583),n=o(3679),a=o(9490),r=o(7860),s=o(7716),l=o(2458),c=o(9238);const d=["button"],g=["*"],u=new s.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),m=new s.OlP("MatButtonToggleGroup"),p={provide:n.JU,useExisting:(0,s.Gpc)(()=>b),multi:!0};let f=0;class h{constructor(t,e){this.source=t,this.value=e}}let b=(()=>{class t{constructor(t,e){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+f++,this.valueChange=new s.vpe,this.change=new s.vpe,this.appearance=e&&e.appearance?e.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._buttonToggles&&this._buttonToggles.forEach(t=>{t.name=this._name,t._markForCheck()})}get vertical(){return this._vertical}set vertical(t){this._vertical=(0,a.Ig)(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(t=>t.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=(0,a.Ig)(t)}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,a.Ig)(t),this._buttonToggles&&this._buttonToggles.forEach(t=>t._markForCheck())}ngOnInit(){this._selectionModel=new r.Ov(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(){const t=this.selected,e=Array.isArray(t)?t[t.length-1]:t,o=new h(e,this.value);this._controlValueAccessorChangeFn(o.value),this.change.emit(o)}_syncButtonToggle(t,e,o=!1,i=!1){this.multiple||!this.selected||t.checked||(this.selected.checked=!1),this._selectionModel?e?this._selectionModel.select(t):this._selectionModel.deselect(t):i=!0,i?Promise.resolve().then(()=>this._updateModelValue(o)):this._updateModelValue(o)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(e=>null!=t.value&&e===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(t=>this._selectValue(t))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const e=this._buttonToggles.find(e=>null!=e.value&&e.value===t);e&&(e.checked=!0,this._selectionModel.select(e))}_updateModelValue(t){t&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.sBO),s.Y36(u,8))},t.\u0275dir=s.lG2({type:t,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,e,o){if(1&t&&s.Suo(o,y,5),2&t){let t;s.iGM(t=s.CRH())&&(e._buttonToggles=t)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,e){2&t&&(s.uIk("aria-disabled",e.disabled),s.ekj("mat-button-toggle-vertical",e.vertical)("mat-button-toggle-group-appearance-standard","standard"===e.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[s._Bn([p,{provide:m,useExisting:t}])]}),t})();const v=(0,l.Kr)(class{});let y=(()=>{class t extends v{constructor(t,e,o,i,n,a){super(),this._changeDetectorRef=e,this._elementRef=o,this._focusMonitor=i,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new s.vpe;const r=Number(n);this.tabIndex=r||0===r?r:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const e=(0,a.Ig)(t);e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=(0,a.Ig)(t)}ngOnInit(){const t=this.buttonToggleGroup;this._isSingleSelector=t&&!t.multiple,this.id=this.id||"mat-button-toggle-"+f++,this._isSingleSelector&&(this.name=t.name),t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new h(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(m,8),s.Y36(s.sBO),s.Y36(s.SBq),s.Y36(c.tE),s.$8M("tabindex"),s.Y36(u,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-button-toggle"]],viewQuery:function(t,e){if(1&t&&s.Gf(d,5),2&t){let t;s.iGM(t=s.CRH())&&(e._buttonElement=t.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,e){1&t&&s.NdJ("focus",function(){return e.focus()}),2&t&&(s.uIk("aria-label",null)("aria-labelledby",null)("id",e.id)("name",null),s.ekj("mat-button-toggle-standalone",!e.buttonToggleGroup)("mat-button-toggle-checked",e.checked)("mat-button-toggle-disabled",e.disabled)("mat-button-toggle-appearance-standard","standard"===e.appearance))},inputs:{disableRipple:"disableRipple",ariaLabelledby:["aria-labelledby","ariaLabelledby"],tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled",id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],value:"value"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[s.qOj],ngContentSelectors:g,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,e){if(1&t&&(s.F$t(),s.TgZ(0,"button",0,1),s.NdJ("click",function(){return e._onButtonClick()}),s.TgZ(2,"span",2),s.Hsn(3),s.qZA(),s.qZA(),s._UZ(4,"span",3),s._UZ(5,"span",4)),2&t){const t=s.MAs(1);s.Q6J("id",e.buttonId)("disabled",e.disabled||null),s.uIk("tabindex",e.disabled?-1:e.tabIndex)("aria-pressed",e.checked)("name",e.name||null)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby),s.xp6(5),s.Q6J("matRippleTrigger",t)("matRippleDisabled",e.disableRipple||e.disabled)}},directives:[l.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),t})(),_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[l.BQ,l.si],l.BQ]}),t})();var T=o(2238),Z=o(6627),I=o(7441),C=o(5987),x=o(1601),O=o(3065),A=o(9790),k=o(2579),M=o(7574),w=o(2901),q=o(5319),P=o(721);const F=(0,O.PH)("[OFFERITEM] Add loadled items",(0,O.Ky)()),U=(0,O.PH)("[OFFERITEM] Add loadled item",(0,O.Ky)()),E=(0,O.PH)("[OFFERITEM] Add loadled item success",(0,O.Ky)()),J=(0,O.PH)("[OFFERITEM] Edit new item",(0,O.Ky)()),N=(0,O.PH)("[OFFERITEM] Edit new item success",(0,O.Ky)()),S=(0,O.PH)("[OFFERITEM] Clear"),V=(0,O.PH)("[OFFERITEM] load items for logged restaurant"),Y=(0,O.PH)("[OFFERITEM] Delete offer item",(0,O.Ky)()),B=(0,O.PH)("[OFFERITEM] Delete offer item success",(0,O.Ky)()),G=(0,O.PH)("[OFFERITEM] Toggle favorite",(0,O.Ky)());var Q=o(5917),R=o(8002),L=o(5304),D=o(2340),H=o(1841),$=o(4080);let j=(()=>{class t{constructor(t,e,o){this.store=t,this.http=e,this.logger=o}getOfferItemDetail(t){return this.http.get(`${D.N.apiUrl}/api/offerItem/${t}`).pipe((0,R.U)(t=>t.data),(0,L.K)(t=>(this.logger.logError(t,"getOfferItemDetail"),(0,Q.of)(null))))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(O.yh),s.LFG(H.eN),s.LFG($.i))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var K=o(446),z=o(8295);function X(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," Name is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function W(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," Price is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function tt(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," Base amount is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function et(t,e){if(1&t&&(s.TgZ(0,"mat-option",17),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("value",t.id),s.xp6(1),s.hij(" ",t.text," ")}}function ot(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," Item unit is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function it(t,e){if(1&t&&(s.TgZ(0,"mat-option",17),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("value",t.id),s.xp6(1),s.hij(" ",t.text," ")}}function nt(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1," Item unit is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}let at=(()=>{class t{constructor(t,e,o,i,n,a){this.route=t,this.formBuilder=e,this.offerService=o,this.location=i,this.store=n,this.snackBarService=a,this.isEdit=!1,this.itemTypes=[],this.unitsType=[],this.subscriptions=new q.w,this.itemId=""}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.subscriptions.add(this.store.select(P.wD).subscribe(t=>{this.itemTypes=t.map(t=>({value:t.itemType,text:t.itemType.toString().toLowerCase()}))})),this.subscriptions.add(this.store.select(P.r).subscribe(t=>{this.unitsType=t.map(t=>({value:t.itemUnit,text:t.itemUnit.toString().toLowerCase()}))})),this.subscriptions.add(this.route.queryParams.subscribe(t=>{this.itemId=t.id,void 0===this.itemId||""===this.itemId?(this.fomrHeader="offer.new-offer-item",this.isEdit=!1):(this.isEdit=!0,this.fomrHeader="offer.edit-offer-item")})),this.offerItemForm=this.formBuilder.group({name:new n.NI("",[n.kI.required]),description:new n.NI(""),price:new n.NI("",[n.kI.required]),baseAmount:new n.NI("",[n.kI.required]),units:new n.NI("",[n.kI.required]),itemType:new n.NI("",[n.kI.required])}),this.offerService.getOfferItemDetail(this.itemId).subscribe(t=>{var e,o,i,n;this.offerItem=t,this.offerItemForm.controls.name.setValue(null===(e=this.offerItem)||void 0===e?void 0:e.name),this.offerItemForm.controls.description.setValue(null===(o=this.offerItem)||void 0===o?void 0:o.description),this.offerItemForm.controls.price.setValue(this.offerItem.price?this.offerItem.price:null),this.offerItemForm.controls.baseAmount.setValue(this.offerItem.baseAmount?this.offerItem.baseAmount:null),this.offerItemForm.controls.units.setValue(String(null===(i=this.offerItem)||void 0===i?void 0:i.unit)),this.offerItemForm.controls.itemType.setValue(String(null===(n=this.offerItem)||void 0===n?void 0:n.itemType))})}onSubmit(){var t;if(this.offerItemForm.invalid)return;const e={id:null===(t=this.offerItem)||void 0===t?void 0:t.id,name:this.offerItemForm.controls.name.value,description:this.offerItemForm.controls.description.value,price:this.offerItemForm.controls.price.value,baseAmount:this.offerItemForm.controls.baseAmount.value,unit:this.offerItemForm.controls.units.value,itemType:this.offerItemForm.controls.itemType.value};this.store.dispatch(this.isEdit?J({item:e,effectCallback:this.snackBarService.showMessageApi}):U({item:e}))}navigateBack(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(C.gz),s.Y36(n.qu),s.Y36(j),s.Y36(i.Ye),s.Y36(O.yh),s.Y36(K.c))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-edit-offer-item"]],decls:47,vars:27,consts:[[1,"edit-form-container"],[1,"header"],["translate",""],[3,"formGroup","ngSubmit"],[1,"input-full-width"],["type","text","matInput","","formControlName","name",3,"placeholder"],[4,"ngIf"],["type","text","matInput","","formControlName","description",3,"placeholder"],["color","primary-text",1,"input-full-width"],["type","number","matInput","","formControlName","price",3,"placeholder"],["type","number","matInput","","formControlName","baseAmount",3,"placeholder"],["formControlName","units",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","itemType",3,"placeholder"],[1,"actions"],["mat-button","",1,"back-button",3,"click"],["mat-button","","type","submit",1,"primary-button"],[3,"value"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"span",2),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"form",3),s.NdJ("ngSubmit",function(){return e.onSubmit()}),s.TgZ(5,"mat-form-field",4),s.TgZ(6,"mat-label",2),s._uU(7,"offer.name"),s.qZA(),s._UZ(8,"input",5),s.ALo(9,"translate"),s.YNc(10,X,4,0,"mat-error",6),s.qZA(),s.TgZ(11,"mat-form-field",4),s.TgZ(12,"mat-label",2),s._uU(13,"offer.description"),s.qZA(),s._UZ(14,"input",7),s.ALo(15,"translate"),s.qZA(),s.TgZ(16,"mat-form-field",8),s.TgZ(17,"mat-label",2),s._uU(18,"offer.price"),s.qZA(),s._UZ(19,"input",9),s.ALo(20,"translate"),s.YNc(21,W,4,0,"mat-error",6),s.qZA(),s.TgZ(22,"mat-form-field",8),s.TgZ(23,"mat-label",2),s._uU(24,"offer.base-amount"),s.qZA(),s._UZ(25,"input",10),s.ALo(26,"translate"),s.YNc(27,tt,4,0,"mat-error",6),s.qZA(),s.TgZ(28,"mat-form-field",4),s.TgZ(29,"mat-select",11),s.ALo(30,"translate"),s.YNc(31,et,2,2,"mat-option",12),s.qZA(),s.YNc(32,ot,4,0,"mat-error",6),s.qZA(),s.TgZ(33,"mat-form-field",4),s.TgZ(34,"mat-select",13),s.ALo(35,"translate"),s.YNc(36,it,2,2,"mat-option",12),s.qZA(),s.YNc(37,nt,4,0,"mat-error",6),s.qZA(),s.TgZ(38,"div",14),s.TgZ(39,"button",15),s.NdJ("click",function(){return e.navigateBack()}),s.TgZ(40,"mat-icon"),s._uU(41,"arrow_back"),s.qZA(),s.TgZ(42,"span",2),s._uU(43,"general.back"),s.qZA(),s.qZA(),s.TgZ(44,"button",16),s.TgZ(45,"span",2),s._uU(46,"general.save"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(3),s.Oqu(e.fomrHeader),s.xp6(1),s.Q6J("formGroup",e.offerItemForm),s.xp6(4),s.Q6J("placeholder",s.lcZ(9,15,"offer.name")),s.xp6(2),s.Q6J("ngIf",e.offerItemForm.controls.name.hasError("required")),s.xp6(4),s.Q6J("placeholder",s.lcZ(15,17,"offer.description")),s.xp6(5),s.Q6J("placeholder",s.lcZ(20,19,"offer.price")),s.xp6(2),s.Q6J("ngIf",e.offerItemForm.controls.price.hasError("required")),s.xp6(4),s.Q6J("placeholder",s.lcZ(26,21,"offer.base-amount")),s.xp6(2),s.Q6J("ngIf",e.offerItemForm.controls.baseAmount.hasError("required")),s.xp6(2),s.Q6J("placeholder",s.lcZ(30,23,"select.unit")),s.xp6(2),s.Q6J("ngForOf",e.unitsType),s.xp6(1),s.Q6J("ngIf",e.offerItemForm.controls.units.hasError("required")),s.xp6(2),s.Q6J("placeholder",s.lcZ(35,25,"select.type")),s.xp6(2),s.Q6J("ngForOf",e.itemTypes),s.xp6(1),s.Q6J("ngIf",e.offerItemForm.controls.itemType.hasError("required")))},directives:[A.Pi,n._Y,n.JL,n.sg,z.KE,z.hX,n.Fj,n.JJ,n.u,i.O5,n.wV,I.gD,i.sg,Z.Hw,z.TO,l.ey],pipes:[A.X$],styles:[".mat-step-header .mat-step-icon-selected,   .mat-step-header .mat-step-icon-state-done,   .mat-step-header .mat-step-icon-state-edit{background-color:#2d2d2d!important}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#2d2d2d!important}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#2d2d2d!important}  .mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick,   .mat-form-field-invalid .mat-select{color:#e53935!important;opacity:.8!important}  .mat-input-element .mat-select{caret-color:#2d2d2d!important}  .mat-form-field-invalid .mat-input-element,   .mat-form-field-invalid .mat-select,   .mat-warn .mat-input-element{caret-color:#e53935!important}  .mat-form-field-label{color:#2d2d2d!important}  .mat-form-field.mat-focused .mat-form-field-label{color:#2d2d2d!important}  .mat-form-field-invalid .mat-select-arrow,   .mat-form-field-invalid .mat-select-arrow-wrapper,   .mat-form-field-invalid .mat-select-value,   .mat-form-field.mat-form-field-invalid .mat-form-field-label{color:#e53935!important}  .mat-select-arrow,   .mat-select-arrow-wrapper,   .mat-select-value{color:#2d2d2d!important}.offer-item-form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.offer-item-form-actions[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background-color:#f5f5f5}.offer-form-container[_ngcontent-%COMP%]{width:80%;margin:auto}.offer-form-header[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:18px;font-weight:500}"]}),t})();var rt=(()=>(function(t){t.Beer="Beer",t.Alcohol="Alcohol",t.Drinks="Drink",t.Soda="Soda",t.Food="Food",t.IceCream="IceCream",t.Other="Other"}(rt||(rt={})),rt))();const st=["categories"],lt=function(t){return{"category-item-active-2":t}};function ct(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",6,7),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().filterByCategory(e.value)}),s.TgZ(2,"h5",3),s._uU(3),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,o=s.oxw();s.MGl("id","category-",t.value,""),s.Q6J("ngClass",s.VKq(3,lt,o.isItemSelected(t.value))),s.xp6(3),s.hij(" ",o.getEnumTranslateKey("offer.category",t.text)," ")}}let dt=(()=>{class t{constructor(t){this.store=t,this.CATEGORY_STORAGE_KEY="filter_category",this.itemTypeChanged=new s.vpe,this.selectedItemType=null,this.subscriptions=new q.w}ngAfterViewInit(){var t;const e=null===(t=this.categories)||void 0===t?void 0:t.find(t=>t.nativeElement.classList.contains("category-item-active"));e&&setTimeout(()=>{this.scroll(e.nativeElement)})}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.subscriptions.add(this.store.select(P.wD).subscribe(t=>{this.itemsCategories=null==t?void 0:t.map(t=>({value:t.itemType,text:t.itemType.toString().toLowerCase()}))}));let t=localStorage.getItem(this.CATEGORY_STORAGE_KEY);Object.values(rt).includes(t)||(t=null),this.selectedItemType=t,this.itemTypeChanged.emit(this.selectedItemType)}filterByCategory(t){this.selectedItemType=this.itemsCategories.some(e=>e.value===t)?t:null,localStorage.setItem(this.CATEGORY_STORAGE_KEY,this.selectedItemType),this.itemTypeChanged.emit(this.selectedItemType)}getItemIcon(t){return`assets/images/${t.toLowerCase()}.svg`}isItemSelected(t){return null===t?null===this.selectedItemType:this.selectedItemType===t}getEnumTranslateKey(t,e){return`${t}.${e}`}scroll(t){t.scrollIntoView({behavior:"smooth"})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(O.yh))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-offer-categories"]],viewQuery:function(t,e){if(1&t&&s.Gf(st,5),2&t){let t;s.iGM(t=s.CRH())&&(e.categories=t)}},outputs:{itemTypeChanged:"itemTypeChanged"},decls:8,vars:4,consts:[["translate","",1,"categories-header"],[1,"offer-categories-container"],[1,"offer-category-card-2",3,"ngClass","click"],["translate","",2,"margin-block-start","0.5em !important","margin-block-end","0.5em !important"],["class","offer-category-card-2",3,"id","ngClass","click",4,"ngFor","ngForOf"],[1,"offer-category-card-2-last"],[1,"offer-category-card-2",3,"id","ngClass","click"],["categories",""]],template:function(t,e){1&t&&(s.TgZ(0,"span",0),s._uU(1,"offer.categories"),s.qZA(),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s.NdJ("click",function(){return e.filterByCategory(null)}),s.TgZ(4,"h5",3),s._uU(5," offer.category.all "),s.qZA(),s.qZA(),s.YNc(6,ct,4,5,"div",4),s._UZ(7,"div",5),s.qZA()),2&t&&(s.xp6(3),s.Q6J("ngClass",s.VKq(2,lt,e.isItemSelected(null))),s.xp6(3),s.Q6J("ngForOf",e.itemsCategories))},directives:[A.Pi,i.mk,i.sg],styles:[".offer-categories-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto}.offer-category-card[_ngcontent-%COMP%]{margin:1em .3em;min-width:90px;min-height:90px;max-width:90px;max-height:90px;box-shadow:0 0 20px #e6e6e6;border-radius:10px;display:flex;align-items:center;flex-direction:column;justify-content:center}.offer-category-card-last[_ngcontent-%COMP%]{min-width:.2em!important}.offer-category-card-2[_ngcontent-%COMP%]{margin:1em .3em;background-color:#f5f7f9;border-radius:10px;display:flex;align-items:center;flex-direction:column;justify-content:center;padding:0 1em}.offer-category-card-2-last[_ngcontent-%COMP%]{min-width:.2em!important}.offer-category-card[_ngcontent-%COMP%] > object[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{width:30px;height:30px}.offer-category-card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:600}.category-item-active[_ngcontent-%COMP%], .category-item-active-2[_ngcontent-%COMP%]{transition:all .5s ease;background-color:#201d1e}.category-item-active-2[_ngcontent-%COMP%]{color:#f5f7f9}.categories-header[_ngcontent-%COMP%]{font-weight:900;margin-left:.6em}"]}),t})();function gt(t,e){if(1&t&&(s.TgZ(0,"mat-option",9),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("value",t.id),s.xp6(1),s.hij(" ",t.name," ")}}let ut=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.itemTypes=[],this.itemTypeDictionary()}onNoClick(){this.dialogRef.close()}itemTypeDictionary(){for(const[t,e]of Object.entries(rt))Number.isNaN(Number(t))&&this.itemTypes.push({id:e,name:t})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(T.so),s.Y36(T.WI))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-offer-filter-dialog"]],decls:17,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"width","100%","overflow","hidden"],["placeholder","Select type",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"margin","5px"],["labelPosition","after",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",1,"button-order-item",3,"mat-dialog-close"],[3,"value"]],template:function(t,e){1&t&&(s.TgZ(0,"h1",0),s._uU(1,"Filter offer items"),s.qZA(),s.TgZ(2,"div",1),s.TgZ(3,"mat-form-field"),s.TgZ(4,"mat-select",2),s.NdJ("ngModelChange",function(t){return e.data.type=t}),s.YNc(5,gt,2,2,"mat-option",3),s.qZA(),s.qZA(),s.TgZ(6,"div",4),s.TgZ(7,"mat-checkbox",5),s.NdJ("ngModelChange",function(t){return e.data.byName=t}),s._uU(8,"SortByName"),s.qZA(),s.qZA(),s.TgZ(9,"div",4),s.TgZ(10,"mat-checkbox",5),s.NdJ("ngModelChange",function(t){return e.data.byPrice=t}),s._uU(11,"SortByPrice"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"div",6),s.TgZ(13,"button",7),s.NdJ("click",function(){return e.onNoClick()}),s._uU(14,"No Thanks"),s.qZA(),s.TgZ(15,"button",8),s._uU(16,"Filter"),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.Q6J("ngModel",e.data.type),s.xp6(1),s.Q6J("ngForOf",e.itemTypes),s.xp6(2),s.Q6J("ngModel",e.data.byName),s.xp6(3),s.Q6J("ngModel",e.data.byPrice),s.xp6(5),s.Q6J("mat-dialog-close",e.data))},directives:[T.uh,T.xY,z.KE,I.gD,n.JJ,n.On,i.sg,T.H8,T.ZT,l.ey],styles:[""]}),t})();var mt=o(9765),pt=o(5435),ft=o(6782),ht=o(597),bt=o(3975);const vt=(0,o(273).H)({selectId:t=>t.id}),yt=vt.getInitialState(),_t=(0,O.Lq)(yt,(0,O.on)(F,(t,e)=>vt.addMany(e.items,t)),(0,O.on)(E,(t,e)=>vt.addOne(e.item,t)),(0,O.on)(N,(t,e)=>vt.updateOne({id:e.item.id,changes:e.item},t)),(0,O.on)(V,(t,e)=>vt.removeAll(t)),(0,O.on)(S,(t,e)=>vt.removeAll(t)),(0,O.on)(B,(t,e)=>vt.removeOne(e.id,t)));function Tt(t=yt,e){return _t(t,e)}const Zt=(0,O.ZF)("offer"),It=(0,O.P1)(Zt,t=>t.ids),Ct=(0,O.P1)(Zt,t=>t.entities),xt=(0,O.P1)(Ct,It,(t,e)=>e.map(e=>t[e]));var Ot=o(4136),At=o(283);function kt(t,e){if(1&t){const t=s.EpF();s.ynx(0),s.TgZ(1,"mat-icon",3),s.NdJ("click",function(){return s.CHM(t),s.oxw().toggleLike(!0)}),s._uU(2,"favorite_border"),s.qZA(),s.BQk()}}function Mt(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-icon",18),s.NdJ("click",function(){return s.CHM(t),s.oxw().toggleLike(!1)}),s._uU(1,"favorite"),s.qZA()}}function wt(t,e){if(1&t&&(s.ynx(0),s.TgZ(1,"mat-button-toggle",21),s._uU(2),s.ALo(3,"translate"),s.ALo(4,"camelCase"),s.qZA(),s.BQk()),2&t){const t=e.$implicit;s.xp6(1),s.Q6J("value",t.type),s.xp6(1),s.Oqu(s.lcZ(3,2,"general."+s.lcZ(4,4,t.type)))}}function qt(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",9),s.TgZ(1,"div",10),s._uU(2,"offer.item.description-variation"),s.qZA(),s.TgZ(3,"div",11),s.TgZ(4,"mat-button-toggle-group",19),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().selectedVariationType=e})("change",function(){return s.CHM(t),s.oxw().variationChanged()}),s.YNc(5,wt,5,6,"ng-container",20),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(4),s.Q6J("ngModel",t.selectedVariationType),s.xp6(1),s.Q6J("ngForOf",t.offerItem.variations)}}let Pt=(()=>{class t{constructor(t,e,o,i,n,a,r){this.route=t,this.router=e,this.offerService=o,this.snackBar=i,this.store=n,this.actions=a,this.translate=r,this.destroy$=new mt.xQ,this.itemCount=1,this.countSum=0}get priceByVariation(){var t,e;return(null===(e=null===(t=this.offerItem)||void 0===t?void 0:t.variations)||void 0===e?void 0:e.length)>1?this.offerItem.variations.find(t=>t.type===this.selectedVariationType).price:this.offerItem.price}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){var t;this.itemId=this.route.snapshot.params.id,this.offerService.getOfferItemDetail(this.itemId).subscribe(t=>{var e,o;this.offerItem=t,this.selectedVariationType=(null===(e=this.offerItem.variations)||void 0===e?void 0:e.length)>1?null===(o=this.offerItem.variations[0])||void 0===o?void 0:o.type:void 0,this.countSum=this.itemCount*this.priceByVariation}),this.store.select((t=this.itemId,(0,O.P1)(Ct,e=>e[t]))).pipe((0,pt.h)(t=>!!t),(0,ft.R)(this.destroy$)).subscribe(t=>{var e,o;this.offerItem=t,this.selectedVariationType=(null===(e=this.offerItem.variations)||void 0===e?void 0:e.length)>1?null===(o=this.offerItem.variations[0])||void 0===o?void 0:o.type:void 0,this.countSum=this.itemCount*this.priceByVariation})}itemCountChanged(t){(t>0||this.itemCount>1&&t<0)&&(this.itemCount=this.itemCount+t,this.countSum=this.itemCount*this.priceByVariation)}navigateToOffer(){this.router.navigate(["/offer"])}addItemsToCart(){this.actions.pipe((0,x.l4)(ht.G6),(0,ft.R)(this.destroy$)).subscribe(()=>{this.snackBar.showMessage(this.translate.instant("cart.item.added"),"",bt.C.Info)}),this.store.dispatch((0,ht.dm)({item:{cartItemId:"",offerItemId:this.offerItem.id,orderedAmount:this.itemCount,selectedVariation:this.selectedVariationType,price:this.priceByVariation,name:this.offerItem.name,thumbnail:this.offerItem.thumbnailUrl}}))}variationChanged(){this.countSum=this.itemCount*this.priceByVariation}toggleLike(t){this.store.dispatch(G({id:this.offerItem.id,favorite:t}))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(C.gz),s.Y36(C.F0),s.Y36(j),s.Y36(K.c),s.Y36(O.yh),s.Y36(x.eX),s.Y36(A.sK))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-offer-item-detail"]],decls:38,vars:11,consts:[[1,"detail-image"],[3,"src"],[1,"detail-icons"],[3,"click"],[4,"ngIf","ngIfElse"],["liked",""],[1,"card"],[1,"title"],[1,"content"],[1,"part"],["translate","",1,"part","header"],[1,"part","content"],["class","part",4,"ngIf"],[1,"amount"],[1,"count"],[1,"actions"],[1,"action-container"],["type","Primary",1,"add-to-cart",3,"clicked"],[1,"liked-item",3,"click"],["name","variations","aria-label","Variations",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],["checked","",3,"value"]],template:function(t,e){if(1&t&&(s.TgZ(0,"div",0),s._UZ(1,"img",1),s.TgZ(2,"div",2),s.TgZ(3,"mat-icon",3),s.NdJ("click",function(){return e.navigateToOffer()}),s._uU(4,"arrow_back"),s.qZA(),s.YNc(5,kt,3,0,"ng-container",4),s.YNc(6,Mt,2,0,"ng-template",null,5,s.W1O),s.qZA(),s.qZA(),s.TgZ(8,"div",6),s.TgZ(9,"div",7),s._uU(10),s.qZA(),s.TgZ(11,"div",8),s.TgZ(12,"div",9),s.TgZ(13,"div",10),s._uU(14,"offer.item.description-header"),s.qZA(),s.TgZ(15,"div",11),s._uU(16),s.qZA(),s.qZA(),s.TgZ(17,"div",9),s.TgZ(18,"div",10),s._uU(19,"offer.item.description-alergens"),s.qZA(),s.TgZ(20,"div",11),s._uU(21,"ToDo"),s.qZA(),s.qZA(),s.YNc(22,qt,6,2,"div",12),s.TgZ(23,"div",13),s.TgZ(24,"mat-icon",3),s.NdJ("click",function(){return e.itemCountChanged(1)}),s._uU(25,"add"),s.qZA(),s.TgZ(26,"span",14),s._uU(27),s.qZA(),s.TgZ(28,"mat-icon",3),s.NdJ("click",function(){return e.itemCountChanged(-1)}),s._uU(29,"remove"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(30,"div",15),s.TgZ(31,"div",16),s.TgZ(32,"rm-button",17),s.NdJ("clicked",function(){return e.addItemsToCart()}),s.TgZ(33,"mat-icon"),s._uU(34,"add_shopping_cart"),s.qZA(),s.TgZ(35,"span"),s._uU(36),s.ALo(37,"currency"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.MAs(7);s.xp6(1),s.Q6J("src",e.offerItem.imageUrl,s.LSH),s.xp6(4),s.Q6J("ngIf",e.offerItem.favorite)("ngIfElse",t),s.xp6(5),s.Oqu(null==e.offerItem?null:e.offerItem.name),s.xp6(6),s.hij(" ",null==e.offerItem?null:e.offerItem.description," "),s.xp6(6),s.Q6J("ngIf",(null==e.offerItem.variations?null:e.offerItem.variations.length)>1),s.xp6(5),s.Oqu(e.itemCount),s.xp6(9),s.hij("\xa0\xa0",s.xi3(37,8,e.countSum,"EUR"),"")}},directives:[Z.Hw,i.O5,A.Pi,Ot.r,b,n.JJ,n.On,i.sg,y],pipes:[i.H9,A.X$,At.h],styles:["[_nghost-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{border-radius:4px;margin-right:12px;padding:0 4px;border:1px solid #dcdcdc;font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}[_nghost-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%] > mat-button-toggle[_ngcontent-%COMP%]{display:flex;height:30px;align-items:center}.body-content[_ngcontent-%COMP%]{margin:0!important}.add-to-cart[_ngcontent-%COMP%]{border-radius:10px;font-size:18px;font-weight:600!important}.add-to-cart[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:.3em}.detail-image[_ngcontent-%COMP%]{height:40%;width:100%}.detail-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:250px;display:flex}.card[_ngcontent-%COMP%]{min-height:calc(100% - 40% - 4em);margin-top:-20px;border-radius:10px 10px 10px 10px;width:95%;position:relative;background-color:#fff;margin-bottom:3.5em;padding-bottom:1em;display:inline-block;transform:translate(2.5%);box-shadow:0 0 60px #959595}.card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:1em 1em .5em;font-weight:700;text-align:center}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .part[_ngcontent-%COMP%]{font-size:18px;line-height:2em;padding:0 1em 1em}.card[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .part[_ngcontent-%COMP%]:first-child{margin-top:2em}.part.header[_ngcontent-%COMP%]{font-weight:700;padding:unset!important}.part.content[_ngcontent-%COMP%]{line-height:1em!important;padding:unset!important;margin:unset!important}.part.content[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.part.content[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{flex:1 1 33%}.amount[_ngcontent-%COMP%]{background-color:#e81010;width:40px;height:100px;position:absolute;top:0;right:30px;display:flex;flex-direction:column;padding:.4em 0;border-radius:0 0 15px 15px;color:#fff;justify-content:space-around;text-align:center}.amount[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{border:none;margin:0 auto}.actions[_ngcontent-%COMP%]{display:flex;margin-top:1em}.actions[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]{width:100%;display:flex;position:relative;justify-content:center}.detail-icons[_ngcontent-%COMP%]{position:absolute;top:0;color:#fff;margin-top:.5em;display:flex;justify-content:space-between;width:calc(100% - 2em);padding:0 1em}.detail-icons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:#f5f7f9;color:#201d1e;padding:2%;border-radius:10px}.liked-item[_ngcontent-%COMP%]{color:#e81010!important;background-color:#f5f7f9}"]}),t})();var Ft=o(7780);let Ut=(()=>{class t{transform(t,e){return null!=e.type&&(t=t.filter(t=>t.itemType===e.type)),e.searchOptions.length>0&&(t=t.filter(t=>e.searchOptions.some(e=>t.name.toLowerCase().includes(e)))),t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Yjl({name:"offerFilter",type:t,pure:!1}),t})();const Et=["promoVideo"];function Jt(t,e){1&t&&(s.TgZ(0,"mat-icon"),s._uU(1,"play_arrow"),s.qZA())}function Nt(t,e){1&t&&(s.TgZ(0,"mat-icon"),s._uU(1,"pause"),s.qZA())}function St(t,e){1&t&&s._UZ(0,"app-offer-item",14),2&t&&s.Q6J("offerItem",e.$implicit)}let Vt=(()=>{class t{constructor(t,e,o){this.dialog=t,this.formBuilder=e,this.store=o,this.offerItems=[],this.isVideoPlaying=!1,this.subscriptions=new q.w,this.filterModel={type:null,searchOptions:[],byPrice:!1,byName:!0}}ngAfterViewInit(){this.promo&&(this.promo.nativeElement.onended=()=>{this.isVideoPlaying=!1},this.promo.nativeElement.onpause=()=>{this.isVideoPlaying=!1},this.promo.nativeElement.onplaying=()=>{this.isVideoPlaying=!0})}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.subscriptions.add(this.store.select(xt).subscribe(t=>{this.offerItems=t})),this.offerItemSearchForm=this.formBuilder.group({search:new n.NI("")}),this.store.dispatch(V())}openDialog(){const t=this.dialog.open(ut,{width:"300px",data:Object.assign({},this.filterModel),autoFocus:!1});this.subscriptions.add(t.afterClosed().subscribe(t=>{void 0!==t&&(console.log(t),this.filterModel=t)}))}onSubmit(){const t=this.offerItemSearchForm.controls.search.value.toLowerCase().split(" ");this.filterModel.searchOptions=t}filterByItemType(t){this.filterModel.type=t}playVideo(){this.isVideoPlaying?this.promo.nativeElement.pause():this.promo.nativeElement.play()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(T.uw),s.Y36(n.qu),s.Y36(O.yh))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-offer"]],viewQuery:function(t,e){if(1&t&&s.Gf(Et,5),2&t){let t;s.iGM(t=s.CRH())&&(e.promo=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&s.ekj("hide-input",e.isVideoPlaying)},decls:20,vars:10,consts:[[1,"video-container"],["width","100%","height","auto",2,"display","block"],["promoVideo",""],["src","assets/videos/promo.mp4","type","video/mp4"],[1,"video-overlay",3,"click"],[4,"ngIf"],[1,"offer-item-search"],[1,"offer-item-search-form",3,"formGroup","ngSubmit"],[1,"search-icon-container",3,"click"],["formControlName","search",1,"search-input",3,"placeholder"],[1,"offer-body"],[3,"itemTypeChanged"],[1,"offer-item-container-2"],[3,"offerItem",4,"ngFor","ngForOf"],[3,"offerItem"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"video",1,2),s._UZ(3,"source",3),s.qZA(),s.TgZ(4,"div",4),s.NdJ("click",function(){return e.playVideo()}),s.YNc(5,Jt,2,0,"mat-icon",5),s.YNc(6,Nt,2,0,"mat-icon",5),s.qZA(),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"form",7),s.NdJ("ngSubmit",function(){return e.onSubmit()}),s.TgZ(9,"div",8),s.NdJ("click",function(){return e.onSubmit()}),s.TgZ(10,"mat-icon"),s._uU(11,"search"),s.qZA(),s.qZA(),s._UZ(12,"input",9),s.ALo(13,"translate"),s.qZA(),s.qZA(),s.TgZ(14,"div",10),s.TgZ(15,"div"),s.TgZ(16,"app-offer-categories",11),s.NdJ("itemTypeChanged",function(t){return e.filterByItemType(t)}),s.qZA(),s.TgZ(17,"div",12),s.YNc(18,St,1,1,"app-offer-item",13),s.ALo(19,"offerFilter"),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(5),s.Q6J("ngIf",!e.isVideoPlaying),s.xp6(1),s.Q6J("ngIf",e.isVideoPlaying),s.xp6(2),s.Q6J("formGroup",e.offerItemSearchForm),s.xp6(4),s.Q6J("placeholder",s.lcZ(13,5,"general.search")),s.xp6(6),s.Q6J("ngForOf",s.xi3(19,7,e.offerItems,e.filterModel)))},directives:[i.O5,n._Y,n.JL,n.sg,Z.Hw,n.Fj,n.JJ,n.u,dt,i.sg,Ft.u],pipes:[A.X$,Ut],styles:[".hide-input[_nghost-%COMP%]   .offer-item-search[_ngcontent-%COMP%]{transition:all .3s ease;opacity:.2}.offer-filter-button[_ngcontent-%COMP%]{margin-bottom:5px;width:10%;height:50%;padding:0;min-width:unset;align-self:center;margin-left:1em}.offer-item-search-container[_ngcontent-%COMP%]{display:flex;padding-right:.5em}.offer-item-search-form[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;display:flex}.offer-item-container[_ngcontent-%COMP%]{margin:1%;grid-column-gap:.5em;-moz-column-gap:.5em;column-gap:.5em;grid-row-gap:.5em;row-gap:.5em;display:flex;flex-wrap:wrap}.offer-item-container-2[_ngcontent-%COMP%]{margin:2%;display:flex;flex-wrap:wrap}.offer-body[_ngcontent-%COMP%]{margin:-20px 2% 2%;padding-bottom:4em}.video-overlay[_ngcontent-%COMP%]{position:absolute;color:#fff;top:2em;width:100%;height:200px;display:flex;bottom:0;justify-content:center;left:0}.video-overlay[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:absolute;top:calc(30%);width:40px;height:40px;font-size:40px}.video-container[_ngcontent-%COMP%]{width:100%;position:relative}.offer-item-search[_ngcontent-%COMP%]{position:relative;top:-40px;height:50px;margin:0 1em;background-color:#fff;border-radius:5px;padding:5px;box-shadow:0 0 60px #959595}.search-input[_ngcontent-%COMP%]{width:90%;height:90%;outline:none;font-size:20px;border:none;padding-top:.3em}.search-icon-container[_ngcontent-%COMP%]{vertical-align:middle;margin-top:auto;margin-bottom:auto;width:15%;height:100%;color:#2d2d2d;display:flex}.search-icon-container[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin:auto;font-size:28px}"]}),t})();var Yt=o(3190),Bt=o(9773),Gt=o(2232);let Qt=(()=>{class t{constructor(t,e){this.action$=t,this.http=e,this.logPrefix="offerActions.",this.loadingRestaurantOfferItems=(0,x.GW)(()=>this.action$.pipe((0,x.l4)(V),(0,Yt.w)(t=>this.http.get(this.baseUrl).pipe((0,R.U)(t=>F({items:t.data})),(0,L.K)(t=>(console.log(t),(0,Q.of)((0,Gt.Ey)({error:t.error.Message,msg:"Item reload failed",action:"loadItemForLoggedRestaurant"})))))))),this.deleteOfferItem=(0,x.GW)(()=>this.action$.pipe((0,x.l4)(Y),(0,Yt.w)(t=>this.http.delete(`${this.baseUrl}/${t.id}`).pipe((0,R.U)(e=>B({id:t.id})),(0,L.K)(t=>(0,Q.of)((0,Gt.Ey)({error:t.error.Message,msg:"Item delete failed",action:"deleteOfferItem"}))))))),this.addNewOfferItem=(0,x.GW)(()=>this.action$.pipe((0,x.l4)(U),(0,Yt.w)(t=>this.http.post(this.baseUrl,t.item).pipe((0,R.U)(t=>E({item:t.data})),(0,L.K)(t=>(0,Q.of)((0,Gt.Ey)({error:t.error.Message,msg:"Item add failed",action:"addOfferItem"}))))))),this.updateOfferItem=(0,x.GW)(()=>this.action$.pipe((0,x.l4)(J),(0,Bt.zg)(t=>this.http.patch(this.baseUrl,t.item).pipe((0,Bt.zg)(t=>[(0,Gt.Oy)({msg:"Super",navigateBack:!0}),N({item:t.data})]),(0,L.K)(t=>{var e;return(0,Q.of)((0,Gt.Ey)({error:null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.Message,msg:"Item edit failed",action:"editOfferItem"}))}))))),this.baseUrl=`${D.N.apiUrl}/api/offerItem`}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(x.eX),s.LFG(H.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();const Rt=[{path:"",component:Vt,canActivate:[M.a],data:{animation:"offer"}},{path:"add",component:at,canActivate:[M.a,w.V],data:{animation:"offer-sub"}},{path:"edit/:id",component:at,canActivate:[M.a,w.V],data:{animation:"offer-sub"}},{path:"detail/:id",component:Pt,canActivate:[M.a],data:{animation:"offer-sub"}}],Lt=[j];let Dt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[Lt],imports:[[i.ez,k.a,Z.Ps,n.UX,n.u5,T.Is,A.aw,_,I.LD,C.Bz.forChild(Rt),O.Aw.forFeature("offer",Tt),x.sQ.forFeature([Qt])]]}),t})()}}]);