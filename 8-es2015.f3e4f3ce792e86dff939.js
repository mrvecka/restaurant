(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Fqwf:function(t,e,r){"use strict";r.r(e),r.d(e,"RestaurantModul",(function(){return at}));var a=r("ofXK"),s=r("3Pt+"),i=r("bTqV"),n=r("Wp6s"),c=r("bSwM"),o=r("FKr1"),u=r("0IaG"),b=r("NFeN"),l=r("qFsG"),d=r("QibW"),p=r("d3UM"),m=r("5RNC"),h=r("dNgK"),f=r("tyNb"),R=r("9jGm"),v=r("l7P3"),g=r("mSvF"),y=r("NUQi"),Q=r("quSY"),z=r("PEil"),O=r("U0Q6"),j=r("1YFl"),A=r("fXoL"),w=r("kmnG");function F(t,e){1&t&&(A.Rb(0,"span"),A.zc(1,"Edit restaurant"),A.Qb())}function k(t,e){1&t&&(A.Rb(0,"span"),A.zc(1,"New restaurant"),A.Qb())}function D(t,e){1&t&&(A.Rb(0,"mat-error"),A.zc(1," Name is "),A.Rb(2,"strong"),A.zc(3,"required"),A.Qb(),A.Qb())}function N(t,e){if(1&t&&(A.Rb(0,"mat-option",15),A.zc(1),A.Qb()),2&t){const t=e.$implicit;A.ic("value",t.id.toLowerCase()),A.Ab(1),A.Bc(" ",t.name," ")}}function I(t,e){1&t&&(A.Rb(0,"mat-error"),A.zc(1," Country is "),A.Rb(2,"strong"),A.zc(3,"required"),A.Qb(),A.Qb())}function C(t,e){1&t&&(A.Rb(0,"mat-error"),A.zc(1," City is "),A.Rb(2,"strong"),A.zc(3,"required"),A.Qb(),A.Qb())}function M(t,e){1&t&&(A.Rb(0,"mat-error"),A.zc(1," Street is "),A.Rb(2,"strong"),A.zc(3,"required"),A.Qb(),A.Qb())}function q(t,e){1&t&&(A.Rb(0,"mat-error"),A.zc(1," Zip code is "),A.Rb(2,"strong"),A.zc(3,"required"),A.Qb(),A.Qb())}let G=(()=>{class t{constructor(t,e,r,a){this.formBuilder=t,this.location=e,this.route=r,this.store=a,this.isEdit=!1,this.subscriptions=new Q.a,this.countries=[]}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.subscriptions.add(this.store.select(z.a).subscribe(t=>{this.countries=t})),this.restaurantForm=this.formBuilder.group({name:new s.g("",[s.F.required]),country:new s.g("",[s.F.required]),city:new s.g("",[s.F.required]),street:new s.g("",[s.F.required]),zipcode:new s.g("",[s.F.required])}),this.subscriptions.add(this.store.select(Object(j.b)(this.route.snapshot.params.id)).subscribe(t=>{var e,r;this.restaurant=t,this.isEdit=void 0!==(null===(e=this.restaurant)||void 0===e?void 0:e.id)&&""!==(null===(r=this.restaurant)||void 0===r?void 0:r.id),this.restaurant&&(this.restaurantForm.controls.name.setValue(this.restaurant.name),this.restaurantForm.controls.country.setValue(this.restaurant.countryId),this.restaurantForm.controls.city.setValue(this.restaurant.city),this.restaurantForm.controls.street.setValue(this.restaurant.street),this.restaurantForm.controls.zipcode.setValue(this.restaurant.zipCode))}))}navigateBack(){this.location.back()}onSubmit(){var t;if(this.restaurantForm.invalid)return;const e={id:null===(t=this.restaurant)||void 0===t?void 0:t.id,name:this.restaurantForm.controls.name.value,countryId:this.restaurantForm.controls.country.value,city:this.restaurantForm.controls.city.value,street:this.restaurantForm.controls.street.value,zipCode:this.restaurantForm.controls.zipcode.value};this.store.dispatch(this.isEdit?Object(O.h)({restaurant:e}):Object(O.a)({restaurant:e}))}}return t.\u0275fac=function(e){return new(e||t)(A.Mb(s.f),A.Mb(a.n),A.Mb(f.a),A.Mb(v.h))},t.\u0275cmp=A.Gb({type:t,selectors:[["app-edit-restaurant"]],decls:38,vars:9,consts:[[1,"edit-form-container"],[1,"header"],[4,"ngIf"],[3,"formGroup"],[1,"input-full-width"],["matInput","","placeholder","Name","formControlName","name"],["placeholder","Select country","formControlName","country"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","City","formControlName","city"],["matInput","","placeholder","Street","formControlName","street"],["matInput","","placeholder","Zip code","formControlName","zipcode"],[1,"actions"],["mat-button","",1,"back-button",3,"click"],["mat-button","",1,"primary-button",3,"click"],[3,"value"]],template:function(t,e){1&t&&(A.Rb(0,"div",0),A.Rb(1,"div",1),A.yc(2,F,2,0,"span",2),A.yc(3,k,2,0,"span",2),A.Qb(),A.Rb(4,"form",3),A.Rb(5,"mat-form-field",4),A.Rb(6,"mat-label"),A.zc(7,"Name"),A.Qb(),A.Nb(8,"input",5),A.yc(9,D,4,0,"mat-error",2),A.Qb(),A.Rb(10,"mat-form-field",4),A.Rb(11,"mat-select",6),A.Rb(12,"mat-option",7),A.zc(13,"Choose country"),A.Qb(),A.yc(14,N,2,2,"mat-option",8),A.Qb(),A.yc(15,I,4,0,"mat-error",2),A.Qb(),A.Rb(16,"mat-form-field",4),A.Rb(17,"mat-label"),A.zc(18,"City"),A.Qb(),A.Nb(19,"input",9),A.yc(20,C,4,0,"mat-error",2),A.Qb(),A.Rb(21,"mat-form-field",4),A.Rb(22,"mat-label"),A.zc(23,"Street"),A.Qb(),A.Nb(24,"input",10),A.yc(25,M,4,0,"mat-error",2),A.Qb(),A.Rb(26,"mat-form-field",4),A.Rb(27,"mat-label"),A.zc(28,"Zip code"),A.Qb(),A.Nb(29,"input",11),A.yc(30,q,4,0,"mat-error",2),A.Qb(),A.Rb(31,"div",12),A.Rb(32,"button",13),A.Yb("click",(function(){return e.navigateBack()})),A.Rb(33,"mat-icon"),A.zc(34,"arrow_back"),A.Qb(),A.zc(35," Back "),A.Qb(),A.Rb(36,"button",14),A.Yb("click",(function(){return e.onSubmit()})),A.zc(37," Save "),A.Qb(),A.Qb(),A.Qb(),A.Qb()),2&t&&(A.Ab(2),A.ic("ngIf",e.isEdit),A.Ab(1),A.ic("ngIf",!e.isEdit),A.Ab(1),A.ic("formGroup",e.restaurantForm),A.Ab(5),A.ic("ngIf",e.restaurantForm.controls.name.hasError("required")),A.Ab(5),A.ic("ngForOf",e.countries),A.Ab(1),A.ic("ngIf",e.restaurantForm.controls.country.hasError("required")),A.Ab(5),A.ic("ngIf",e.restaurantForm.controls.city.hasError("required")),A.Ab(5),A.ic("ngIf",e.restaurantForm.controls.street.hasError("required")),A.Ab(5),A.ic("ngIf",e.restaurantForm.controls.zipcode.hasError("required")))},directives:[a.t,s.H,s.s,s.j,w.c,w.g,l.a,s.c,s.r,s.i,p.a,o.f,a.s,i.b,b.a,w.b],styles:[""]}),t})();var S=r("LRne"),U=r("eIep"),E=r("lJxs"),B=r("JIr8"),V=r("AytR"),Y=r("GXKv"),$=r("tk/3");let _=(()=>{class t{constructor(t,e){this.action$=t,this.http=e,this.baseUrl="",this.loadRestaurants$=Object(R.c)(()=>this.action$.pipe(Object(R.d)(O.e),Object(U.a)(t=>this.http.get(this.baseUrl).pipe(Object(E.a)(t=>Object(O.f)({items:t.data})),Object(B.a)(t=>Object(S.a)(Object(Y.a)({error:t.error.Message,msg:"Load restaurants failed",action:"loadRestaurants"}))))))),this.updateRestaurant$=Object(R.c)(()=>this.action$.pipe(Object(R.d)(O.h),Object(U.a)(t=>this.http.patch(this.baseUrl,t.restaurant).pipe(Object(E.a)(t=>Object(O.i)({restaurant:t.data})),Object(B.a)(t=>Object(S.a)(Object(Y.a)({error:t.error.Message,msg:"Restaurant update failed",action:"updateRestaurant"}))))))),this.createRestaurant$=Object(R.c)(()=>this.action$.pipe(Object(R.d)(O.a),Object(U.a)(t=>this.http.post(this.baseUrl,t.restaurant).pipe(Object(E.a)(t=>Object(O.b)({restaurant:t.data})),Object(B.a)(t=>Object(S.a)(Object(Y.a)({error:t.error.Message,msg:"Restaurant create failed",action:"createRestaurant"}))))))),this.baseUrl=V.a.apiUrl+"/api/Restaurant/"}}return t.\u0275fac=function(e){return new(e||t)(A.Vb(R.a),A.Vb($.b))},t.\u0275prov=A.Ib({token:t,factory:t.\u0275fac}),t})();var x=r("PoVU");let J=(()=>{class t{constructor(t){this.store=t}resolve(t,e){return this.refresh(e.url)&&(this.previousUrl=e.url,this.reloadData(t)),this.previousUrl=e.url,Object(S.a)(!0)}refresh(t){return!this.previousUrl||this.previousUrl===t}reloadData(t){this.store.dispatch(Object(O.e)())}}return t.\u0275fac=function(e){return new(e||t)(A.Vb(v.h))},t.\u0275prov=A.Ib({token:t,factory:t.\u0275fac}),t})();var K=r("hCxx"),L=r("Do2H");let P=(()=>{class t{constructor(t,e,r,a,s,i){this.router=t,this.location=e,this.route=r,this.dialog=a,this.store=s,this.baseService=i,this.subscriptions=new Q.a}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.subscriptions.add(this.store.select(Object(j.d)(this.route.snapshot.params.id)).subscribe(t=>{this.restaurantDetail=t}))}navigateBack(){this.location.back()}deleteRestaurant(){this.dialog.open(K.a,{width:"300px",data:{message:"Delete restaurant"},autoFocus:!1}).afterClosed().subscribe(t=>{void 0!==t&&!0===t&&this.store.dispatch(Object(O.c)({id:this.restaurantDetail.id,successCallback:this.baseService.navigateBackWithTimeout}))})}editRestaurant(){this.router.navigate(["restaurants/edit",this.restaurantDetail.id])}}return t.\u0275fac=function(e){return new(e||t)(A.Mb(f.c),A.Mb(a.n),A.Mb(f.a),A.Mb(u.b),A.Mb(v.h),A.Mb(L.a))},t.\u0275cmp=A.Gb({type:t,selectors:[["app-restaurant-detail"]],decls:22,vars:5,consts:[[1,"detail-header"],[1,"detail-image"],["matRipple","",3,"click"],["src","./assets/images/image_not_found2.jpg"],[1,"detail-description"],[1,"name"],[1,"description"],[1,"actions"],["mat-button","",1,"danger-button",3,"click"],["mat-button","",1,"primary-button",3,"click"]],template:function(t,e){1&t&&(A.Nb(0,"div",0),A.Rb(1,"div",1),A.Rb(2,"mat-icon",2),A.Yb("click",(function(){return e.navigateBack()})),A.zc(3,"keyboard_backspace"),A.Qb(),A.Nb(4,"img",3),A.Qb(),A.Rb(5,"div",4),A.Rb(6,"div",5),A.Rb(7,"span"),A.zc(8),A.Qb(),A.Qb(),A.Rb(9,"div",6),A.zc(10),A.Qb(),A.Rb(11,"div",6),A.zc(12),A.Qb(),A.Rb(13,"div",6),A.zc(14),A.Qb(),A.Rb(15,"div",6),A.zc(16),A.Qb(),A.Rb(17,"div",7),A.Rb(18,"button",8),A.Yb("click",(function(){return e.deleteRestaurant()})),A.zc(19," Delete restaurant "),A.Qb(),A.Rb(20,"button",9),A.Yb("click",(function(){return e.editRestaurant()})),A.zc(21," Edit restaurant "),A.Qb(),A.Qb(),A.Qb()),2&t&&(A.Ab(8),A.Ac(null==e.restaurantDetail?null:e.restaurantDetail.name),A.Ab(2),A.Ac(null==e.restaurantDetail?null:e.restaurantDetail.countryName),A.Ab(2),A.Ac(null==e.restaurantDetail?null:e.restaurantDetail.city),A.Ab(2),A.Ac(null==e.restaurantDetail?null:e.restaurantDetail.street),A.Ab(2),A.Ac(null==e.restaurantDetail?null:e.restaurantDetail.zipCode))},directives:[b.a,o.h,i.b],styles:[".body-content{margin:0!important}.actions{display:flex;justify-content:space-around}"],encapsulation:2}),t})();var W=r("C5ye");let X=(()=>{class t{constructor(t,e){this.router=t,this.store=e}ngOnInit(){}openDetail(t){this.store.dispatch(Object(O.g)({id:t})),this.router.navigate(["restaurants/detail",t])}}return t.\u0275fac=function(e){return new(e||t)(A.Mb(f.c),A.Mb(v.h))},t.\u0275cmp=A.Gb({type:t,selectors:[["app-restaurant-item"]],inputs:{restaurant:"restaurant"},decls:11,vars:4,consts:[["matRipple","",1,"list-item-content",3,"click"],[1,"list-item-header"],[1,"list-item-name"],[1,"offer-item-price"]],template:function(t,e){1&t&&(A.Rb(0,"div",0),A.Yb("click",(function(){return e.openDetail(e.restaurant.id)})),A.Rb(1,"div",1),A.Rb(2,"div"),A.Rb(3,"div"),A.Rb(4,"h3",2),A.zc(5),A.Qb(),A.Qb(),A.Rb(6,"div",3),A.Rb(7,"span"),A.zc(8),A.dc(9,"addressWithCountry"),A.Qb(),A.zc(10," \xa0 "),A.Qb(),A.Qb(),A.Qb(),A.Qb()),2&t&&(A.Ab(5),A.Bc(" ",e.restaurant.name," "),A.Ab(3),A.Ac(A.ec(9,2,e.restaurant)))},directives:[o.h],pipes:[W.a],styles:[""]}),t})(),Z=(()=>{class t{transform(t,e){return null!=t&&t.sort(e.nameAsc?(t,e)=>t.name<e.name?1:t.name>e.name?-1:0:(t,e)=>t.name>e.name?1:t.name<e.name?-1:0),t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=A.Lb({name:"restaurantSort",type:t,pure:!0}),t})();function H(t,e){1&t&&(A.Rb(0,"mat-icon"),A.zc(1,"arrow_drop_down"),A.Qb())}function T(t,e){1&t&&(A.Rb(0,"mat-icon"),A.zc(1,"arrow_drop_up"),A.Qb())}function tt(t,e){1&t&&A.Nb(0,"app-restaurant-item",6),2&t&&A.ic("restaurant",e.$implicit)}const et=function(t){return{nameAsc:t}},rt=[{path:"",component:(()=>{class t{constructor(t,e){this.router=t,this.store=e,this.subscriptions=new Q.a,this.sortAscDesc=!0}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.store.dispatch(Object(O.e)()),this.store.dispatch(Object(O.g)({id:null})),this.subscriptions.add(this.store.select(j.a).subscribe(t=>{this.restaurants=t}))}addNewRestaurant(){this.router.navigate(["restaurants/add"])}sortRestaurants(){this.sortAscDesc=!this.sortAscDesc}}return t.\u0275fac=function(e){return new(e||t)(A.Mb(f.c),A.Mb(v.h))},t.\u0275cmp=A.Gb({type:t,selectors:[["app-restaurant"]],decls:14,vars:8,consts:[[1,"restaurant-content"],[1,"header-container"],["matRipple","",1,"sort-item",3,"click"],[4,"ngIf"],["mat-button","",1,"base-button",3,"click"],[3,"restaurant",4,"ngFor","ngForOf"],[3,"restaurant"]],template:function(t,e){1&t&&(A.Rb(0,"div",0),A.Rb(1,"div",1),A.Rb(2,"div",2),A.Yb("click",(function(){return e.sortRestaurants()})),A.Rb(3,"span"),A.zc(4,"Name"),A.Qb(),A.zc(5," \xa0 "),A.yc(6,H,2,0,"mat-icon",3),A.yc(7,T,2,0,"mat-icon",3),A.Qb(),A.Rb(8,"button",4),A.Yb("click",(function(){return e.addNewRestaurant()})),A.zc(9," New \xa0"),A.Rb(10,"mat-icon"),A.zc(11,"add"),A.Qb(),A.Qb(),A.Qb(),A.yc(12,tt,1,1,"app-restaurant-item",5),A.dc(13,"restaurantSort"),A.Qb()),2&t&&(A.Ab(6),A.ic("ngIf",e.sortAscDesc),A.Ab(1),A.ic("ngIf",!e.sortAscDesc),A.Ab(5),A.ic("ngForOf",A.fc(13,3,e.restaurants,A.kc(6,et,e.sortAscDesc))))},directives:[o.h,a.t,i.b,b.a,a.s,X],pipes:[Z],styles:[""]}),t})()},{path:"add",component:G,canActivate:[y.a],resolve:{result:J},runGuardsAndResolvers:"always"},{path:"edit/:id",component:G,canActivate:[y.a],resolve:{result:J},runGuardsAndResolvers:"always"},{path:"detail/:id",component:P,canActivate:[y.a],resolve:{result:J},runGuardsAndResolvers:"always"}];let at=(()=>{class t{}return t.\u0275mod=A.Kb({type:t}),t.\u0275inj=A.Jb({factory:function(e){return new(e||t)},providers:[J],imports:[[g.a,v.j.forFeature(x.a,x.b),R.b.forFeature([_]),f.g.forChild(rt),a.c,s.l,p.b,d.c,s.B,c.c,u.g,m.b,b.b,i.c,n.j,l.b,o.i,h.c]]}),t})()}}]);